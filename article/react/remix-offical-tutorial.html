<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Remix | BABA&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="BABA çš„ä¸ªäººåšå®¢">
    
    <link rel="preload" href="/Blog/assets/css/0.styles.390a3189.css" as="style"><link rel="preload" href="/Blog/assets/js/app.1176005e.js" as="script"><link rel="preload" href="/Blog/assets/js/3.daabd2a0.js" as="script"><link rel="preload" href="/Blog/assets/js/1.317b0f87.js" as="script"><link rel="preload" href="/Blog/assets/js/11.668eb78e.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.21422673.js"><link rel="prefetch" href="/Blog/assets/js/12.c37c7bbe.js"><link rel="prefetch" href="/Blog/assets/js/4.e5687d17.js"><link rel="prefetch" href="/Blog/assets/js/5.5dc77b8c.js"><link rel="prefetch" href="/Blog/assets/js/6.7484ccc1.js"><link rel="prefetch" href="/Blog/assets/js/7.6c3652a9.js"><link rel="prefetch" href="/Blog/assets/js/8.bba9ce18.js"><link rel="prefetch" href="/Blog/assets/js/9.28d9a05b.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.390a3189.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>BABA's Blog</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>BABA çš„ä¸ªäººåšå®¢</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
          Â Â 
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blog/" class="home-link router-link-active"><!----> <span class="site-name">BABA's Blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Blog/" class="nav-link"><i class="undefined"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      BABA
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/SKADaddy" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2137106337768238/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  æ˜é‡‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><!----> <!----> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>3</h3> <h6 data-v-39576ba9>æ–‡ç« </h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>0</h3> <h6 data-v-39576ba9>æ ‡ç­¾</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/Blog/" class="nav-link"><i class="undefined"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      BABA
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/SKADaddy" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2137106337768238/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  æ˜é‡‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/Blog/article/vue/composition-api" class="sidebar-heading clickable"><span>Vue</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/Blog/article/vue/composition-api.html" class="sidebar-link">composition-api</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/Blog/article/react/remix-offical-tutorial" class="sidebar-heading clickable open active"><span>React</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/Blog/article/react/remix-offical-tutorial.html" aria-current="page" class="active sidebar-link">remix-offical-tutorial</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2></h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
          Â Â 
          <!---->
          2021
        </a></span></div></div> <div data-v-1aefc0b4><main class="page"><section><div class="page-title"><h1 class="title">Remix</h1> <div data-v-f875f3fc><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="remix"><a href="#remix" class="header-anchor">#</a> Remix</h2> <h3 id="ä»€ä¹ˆæ˜¯-remix"><a href="#ä»€ä¹ˆæ˜¯-remix" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯ Remix</h3> <p><a href="https://remix.run/" target="_blank" rel="noopener noreferrer">Remix<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ˜¯ä¸€ä¸ªå¯ä»¥è®©ä½ ä¸“æ³¨äºç”¨æˆ·ç•Œé¢å¹¶ä¸”é‡æ–°å­¦ä¹  Web åŸºç¡€çŸ¥è¯†æ¥ä¸ºç”¨æˆ·æä¾›å¿«é€Ÿæµç•…çš„ç”¨æˆ·ä½“éªŒçš„å…¨æ ˆ Web æ¡†æ¶ã€‚</p> <p>å®ƒæ˜¯ç”± React Router çš„å›¢é˜Ÿç ”å‘çš„ä¸€ä¸ªåŸºäº React çš„æ¡†æ¶ï¼Œç›¸å¯¹äºå…¶ä»–çš„æ¡†æ¶ï¼Œè¿™ä¸ªæ¡†æ¶çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯ä¸“æ³¨äº â€œåµŒå¥—è·¯ç”±â€ è¿™ä¸ªæ¦‚å¿µï¼Œå…è®¸ç»„ä»¶ç›´æ¥ä¸å…¶ä»–é¡µé¢ç›¸è¿æ¥ï¼Œç®€åŒ–ä»£ç çš„ç¼–å†™ã€‚</p> <p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ Remix å®˜æ–¹æ–‡æ¡£çš„æ•™ç¨‹æ¥æ­å»ºä¸€ä¸ª Jokes åº”ç”¨ï¼Œæ¥äº†è§£ Remix æ‰€å…·æœ‰çš„ç‰¹æ€§ã€‚</p> <h3 id="å‰ç½®çŸ¥è¯†"><a href="#å‰ç½®çŸ¥è¯†" class="header-anchor">#</a> å‰ç½®çŸ¥è¯†</h3> <ul><li><a href="https://www.typescriptlang.org/docs/handbook/intro.html" target="_blank" rel="noopener noreferrer">TypeScript<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼Œè¿™ä¸ªæ•™ç¨‹çš„ä»£ç ä¼šæ˜¯åŸºäº TypeScript æ¥ç¼–å†™çš„ï¼Œå¦‚æœä½ æ²¡äº†è§£è¿‡ TypeScript å¯ä»¥å»å®˜æ–¹çš„ä½¿ç”¨æ‰‹å†Œè¿›è¡Œå­¦ä¹ ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨ JavaScript æ¥ç¼–å†™ã€‚</li> <li><a href="https://beta.reactjs.org/" target="_blank" rel="noopener noreferrer">React<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼ŒRemix æ˜¯ä¸€æ¬¾åŸºäº React çš„å…¨æ ˆæ¡†æ¶ï¼Œä½ å¯èƒ½éœ€è¦äº†è§£ä¸€éƒ¨åˆ†åŸºç¡€çš„ React çŸ¥è¯†ï¼Œåˆšå¥½åœ¨æœ€è¿‘ React å®˜æ–¹æ›´æ–°äº†æ–°çš„æ–‡æ¡£ï¼Œç›¸å¯¹äºä»¥å‰çš„åŸºäº class çš„å†™æ³•ï¼Œæ–°çš„æ–‡æ¡£å°†ä»¥ hooks æ¥åšæ•™ç¨‹ã€‚</li></ul> <h3 id="å¼€å‘ç¯å¢ƒ"><a href="#å¼€å‘ç¯å¢ƒ" class="header-anchor">#</a> å¼€å‘ç¯å¢ƒ</h3> <ul><li><code>Node &gt;= 14</code></li> <li><code>npm &gt;= 7</code></li></ul> <div class="language-zsh extra-class"><pre class="language-text"><code># ä½ å¯ä»¥æ£€æŸ¥ä½ çš„ node ç¯å¢ƒæ˜¯å¤šå°‘ï¼Œæˆ‘ç”¨çš„æ˜¯ 16.13.1
node -v
# v16.13.1
npm -v
# 8.1.2
# å¯ä»¥ä½¿ç”¨ nvm / window-nvm æ¥å®‰è£… å¯¹åº”çš„ node ç‰ˆæœ¬
nvm install v16.13.1
# æˆ–è€…ç›´æ¥å®‰è£… stable ç‰ˆæœ¬
nvm install stable
# ç„¶åä½¿ç”¨æ–°å®‰è£…çš„ node ç‰ˆæœ¬
nvm use v16.13.1
# nvm use stable
</code></pre></div><h3 id="åˆ›å»º-remix-é¡¹ç›®"><a href="#åˆ›å»º-remix-é¡¹ç›®" class="header-anchor">#</a> åˆ›å»º Remix é¡¹ç›®</h3> <p>1ã€æ‰“å¼€ä½ çš„ç»ˆç«¯è¿è¡Œä¸‹é¢è¿™è¡Œå‘½ä»¤</p> <div class="language-zsh extra-class"><pre class="language-text"><code>npx create-remix@latest
</code></pre></div><blockquote><p>æ‰§è¡Œä¹‹åå¯èƒ½ä¼šé—®ä½ æ˜¯å¦æƒ³å®‰è£… <code>create-remix</code> æ¥æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€‚æŒ‰ Y ç¡®è®¤ï¼Œå®ƒåªä¼šæš‚æ—¶å®‰è£…æ¥æ‰§è¡Œ setup è„šæœ¬</p></blockquote> <p>å½“å®‰è£…å®Œæˆä¹‹åï¼Œå®ƒä¼šé—®ä½ ä¸€äº›é—®é¢˜</p> <div class="language- extra-class"><pre class="language-text"><code>R E M I X

ğŸ’¿ Welcome to Remix! Let's get you set up with a new project.

? Where would you like to create your app? remix-jokes
? Where do you want to deploy? Choose Remix if you're unsure, it's easy to change deployment targets. Remix
 App Server
? TypeScript or JavaScript? TypeScript
? Do you want me to run `npm install`? Yes
</code></pre></div><p>è¿™é‡Œé¢é€‰æ‹©çš„ Remix App Server é€‰é¡¹ï¼Œæ˜¯ä¸€ä¸ªåŸºäº <a href="https://expressjs.com/" target="_blank" rel="noopener noreferrer">Express<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> çš„ <a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">Node.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æœåŠ¡å™¨ã€‚</p> <p>å½“ <code>npm install</code> å®Œæˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬ <code>cd remix-jokes</code> è¿›å…¥åˆ°ç›®å½•ç„¶åé€šè¿‡å®‡å®™ç¬¬ä¸€ IDE--VSCode æ¥æ‰“å¼€è¿™ä¸ªç›®å½• <code>code .</code></p> <h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="header-anchor">#</a> ç›®å½•ç»“æ„</h3> <div class="language- extra-class"><pre class="language-text"><code>remix-jokes
â”œâ”€â”€ README.md
â”œâ”€â”€ app
â”‚   â”œâ”€â”€ entry.client.tsx
â”‚   â”œâ”€â”€ entry.server.tsx
â”‚   â”œâ”€â”€ root.tsx
â”‚   â”œâ”€â”€ routes
â”‚   â”‚   â”œâ”€â”€ demos
â”‚   â”‚   â”‚   â”œâ”€â”€ about
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ whoa.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ about.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ actions.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ correct.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ params
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ $id.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â””â”€â”€ params.tsx
â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â””â”€â”€ styles
â”‚       â”œâ”€â”€ dark.css
â”‚       â”œâ”€â”€ demos
â”‚       â”‚   â””â”€â”€ about.css
â”‚       â””â”€â”€ global.css
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â”œâ”€â”€ public
â”‚   â””â”€â”€ favicon.ico
â”œâ”€â”€ remix.config.js
â”œâ”€â”€ remix.env.d.ts
â””â”€â”€ tsconfig.json
</code></pre></div><ul><li><code>app/</code> è¿™é‡Œå­˜æ”¾çš„æ˜¯ä½ çš„ Remix åº”ç”¨çš„ä»£ç ï¼Œå°±åƒ <code>vue-cli</code> / <code>create-react-app</code> ç”Ÿæˆé¡¹ç›®é‡Œé¢çš„ <code>src/</code></li> <li><code>app/entry.client.tsx</code> å½“åº”ç”¨åœ¨æµè§ˆå™¨åŠ è½½å®Œæˆçš„æ—¶å€™ä¼šè¿è¡Œè¿™ä¸ªæ–‡ä»¶é‡Œé¢çš„ JavaScript ä»£ç ï¼ŒRemix ç”¨è¿™ä»½æ–‡ä»¶æ¥ <a href="https://reactjs.org/docs/react-dom.html#hydrate" target="_blank" rel="noopener noreferrer">hydrate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> React ç»„ä»¶ã€‚hydrate æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿç®€å•æ¥è¯´å°±æ˜¯æœåŠ¡ç«¯æ¸²æŸ“çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯è¿”å›å­—ç¬¦ä¸²ï¼Œæµè§ˆå™¨æ ¹æ®è¿™äº›å­—ç¬¦ä¸²è¿›è¡Œ React ç»„ä»¶çš„åˆ›å»ºï¼Œå®Œæˆåˆå§‹åŒ–çš„å·¥ä½œï¼Œè¿™ä¸ªè¿‡ç¨‹å«â€œæ³¨æ°´â€ã€‚</li> <li><code>app/entry.server.tsx</code> å½“ä¸€ä¸ªè¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨çš„æ—¶å€™ï¼Œè¿™ä¸ªæ–‡ä»¶é‡Œé¢çš„ JavaScript ä»£ç ä¼šç¬¬ä¸€æ—¶é—´è¿è¡Œã€‚Remix ä¼šå¸®ä½ åŠ è½½æ‰€æœ‰å¿…è¦çš„æ•°æ®ï¼Œè€Œæˆ‘ä»¬å°†ä¼šè´Ÿè´£å°†å“åº”çš„æ•°æ®å‘é€å›æµè§ˆå™¨ã€‚</li> <li><code>app/root.tsx</code> è¿™ä»½æ–‡ä»¶æ˜¯åº”ç”¨çš„æ ¹ç»„ä»¶ï¼Œå°±åƒ Vue çš„ <code>App.vue</code> ï¼Œç½‘é¡µçš„ <code>html</code> æ ‡ç­¾å°†ä¼šåœ¨è¿™é‡Œæ¸²æŸ“ã€‚</li> <li><code>app/routes/</code> è¿™ä¸ªè·¯å¾„ä¸‹é¢å°†ä¼šå­˜æ”¾æ‰€æœ‰å’Œè·¯ç”±ç›¸å…³çš„æ¨¡å—æ–‡ä»¶ï¼ŒRemix ä¼šæ ¹æ®è¿™ä¸ªç›®å½•ä¸‹é¢çš„æ–‡ä»¶åå­—æ¥åˆ›å»ºå¯¹åº”çš„ URL è·¯ç”±ã€‚</li> <li><code>public/</code> è¿™é‡Œå’Œå¹³å¸¸ä¸€æ ·å­˜æ”¾ä½ é¡¹ç›®é‡Œçš„é™æ€èµ„æºï¼Œä¾‹å¦‚å›¾ç‰‡ï¼Œå­—ä½“ç­‰ç­‰ã€‚</li> <li><code>remix.config.js</code> Remix åº”ç”¨å¯¹åº”çš„é…ç½®å†™åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œé¢ã€‚</li></ul> <p>è®©æˆ‘ä»¬å°è¯•æ‰“åŒ…ä¸€ä¸‹æ–‡ä»¶</p> <div class="language- extra-class"><pre class="language-text"><code>npm run build
</code></pre></div><p>åœ¨æ‰“åŒ…å®Œæˆä¹‹åï¼Œå½“å‰ç›®å½•ä¸‹é¢ä¼šå‡ºç°ä¸‹é¢å‡ ä¸ªæ–‡ä»¶å¤¹</p> <ul><li><code>.cache/</code> è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹æ˜¯ Remix å†…éƒ¨ä½¿ç”¨çš„ä¸œè¥¿</li> <li><code>build/</code> æ˜¯æœåŠ¡ç«¯çš„ä»£ç </li> <li><code>public/build/</code> æ˜¯å®¢æˆ·ç«¯çš„ä»£ç </li></ul> <p>æŠŠè¿™å‡ ä¸ªè·¯å¾„åŠ å…¥åˆ° .gitignore æ–‡ä»¶é‡Œé¢</p> <div class="language- extra-class"><pre class="language-text"><code>/.cache
/build
/public/build
</code></pre></div><p>æƒ³è¦è¿è¡Œæ‰“åŒ…åçš„åº”ç”¨æ‰§è¡Œ</p> <div class="language- extra-class"><pre class="language-text"><code>npm start
</code></pre></div><p>æ‰“å¼€é“¾æ¥åä¼šçœ‹åˆ°ä¸‹é¢çš„ç½‘é¡µç•Œé¢</p> <p><img src="https://gitee.com/SKADaddy/pic/raw/master/remix-starter.png" alt="remix-starter"></p> <p>å¦‚æœä½ æƒ³çœ‹çœ‹è¿™ä¸ª Remix Starter é‡Œé¢çš„å†…å®¹å¯ä»¥ç‚¹ä¸€ä¸‹å¯¹åº”çš„é“¾æ¥ï¼Œä½†æ˜¯è¿™äº›å†…å®¹åœ¨æ¥ä¸‹æ¥çš„æ•™ç¨‹éƒ½ä¼šè®²åˆ°ã€‚</p> <p><kbd>Ctrl</kbd> + <kbd>C</kbd> åœæ‰æœåŠ¡ï¼Œç„¶ååˆ é™¤ä¸‹é¢çš„æ–‡ä»¶å¤¹</p> <ul><li><code>app/routes</code></li> <li><code>app/styles</code></li></ul> <p>ç„¶åæŠŠ <code>app/root.tsx</code> çš„ä»£ç æ›¿æ¢æ‰ <a href="https://remix.run/docs/en/v1/tutorials/jokes#outline" target="_blank" rel="noopener noreferrer">Jokes App<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> è¿™ä¸ªé‡Œé¢çš„ä»£ç ï¼Œä»£ç æˆ‘å°±ä¸å¤åˆ¶äº†ï¼Œæœ‰éœ€è¦çš„è¯»è€…å¯ä»¥å¤åˆ¶ç²˜è´´åˆ°è‡ªå·±çš„é¡¹ç›®ã€‚</p> <p>å…³é”®çš„ä»£ç æ˜¯è¿™éƒ¨åˆ† <code>{process.env.NODE_ENV === &quot;development&quot; ? &lt;LiveReload /&gt; : null}</code> è¿™ä¸ª <code>&lt;LiveReload/&gt;</code> ç»„ä»¶ã€‚è¿™ä¸ªç»„ä»¶ä¼šå»ºç«‹ä¸€ä¸ª WebSocket æ¥çƒ­æ›´æ–°å¹¶ä¸”è‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ã€‚</p> <p>ç°åœ¨ä½ çš„ <code>app/</code> ç›®å½•ä¸‹é¢çš„ç»“æ„æ˜¯è¿™æ ·çš„</p> <div class="language- extra-class"><pre class="language-text"><code>app
â”œâ”€â”€ entry.client.tsx
â”œâ”€â”€ entry.server.tsx
â””â”€â”€ root.tsx
</code></pre></div><p>ç„¶åè¿è¡Œ <code>npm run dev</code> è¿™æ ·å¯ä»¥çœ‹åˆ°æ•´ä¸ªé¡µé¢å·²ç»è·Ÿä¹‹å‰çš„ Remix Starter ä¸ä¸€æ ·äº†ã€‚</p> <h3 id="è·¯ç”±"><a href="#è·¯ç”±" class="header-anchor">#</a> è·¯ç”±</h3> <p>Remix çš„è·¯ç”±æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å®šä¹‰</p> <ul><li><p>é€šè¿‡ <a href="https://remix.run/docs/en/v1.0.6/api/conventions#remixconfigjs" target="_blank" rel="noopener noreferrer">remix.config.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ¥åˆ›å»ºè·¯ç”±</p></li> <li><p>å¦ä¸€ç§ Remix é‡Œæ›´é€šç”¨çš„æ–¹æ³•æ˜¯é€šè¿‡åœ¨ <code>routes/</code> æ–‡ä»¶å¤¹æ¥åˆ›å»ºè·¯ç”±</p></li></ul> <h4 id="remix-config-js"><a href="#remix-config-js" class="header-anchor">#</a> remix.config.js</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  appDirectory<span class="token operator">:</span> <span class="token string">&quot;app&quot;</span><span class="token punctuation">,</span> <span class="token comment">// å¯¹åº” app æ–‡ä»¶å¤¹ï¼Œä½ ä¹Ÿå¯ä»¥æ”¹æˆ src</span>
  browserBuildDirectory<span class="token operator">:</span> <span class="token string">&quot;public/build&quot;</span><span class="token punctuation">,</span> <span class="token comment">// æ‰“åŒ…åå®¢æˆ·ç«¯ä»£ç å­˜æ”¾çš„è·¯å¾„</span>
  devServerPort<span class="token operator">:</span> <span class="token number">8002</span><span class="token punctuation">,</span>
  publicPath<span class="token operator">:</span> <span class="token string">&quot;/build/&quot;</span><span class="token punctuation">,</span> <span class="token comment">// é™æ€èµ„æºå­˜æ”¾è·¯å¾„</span>
  serverBuildDirectory<span class="token operator">:</span> <span class="token string">&quot;build&quot;</span><span class="token punctuation">,</span> <span class="token comment">// æ‰“åŒ…åæœåŠ¡ç«¯ä»£ç å­˜æ”¾çš„è·¯å¾„</span>
  <span class="token function">routes</span><span class="token punctuation">(</span><span class="token parameter">defineRoutes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">defineRoute</span><span class="token punctuation">(</span><span class="token parameter">route</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦åŒ¹é…çš„ React Router è·¯å¾„</span>
      <span class="token comment">// ç¬¬äºŒä¸ªå‚æ•°æ˜¯è·¯ç”±è¦å¤„ç†çš„å¯¹åº”æ–‡ä»¶</span>
      <span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;/somewhere/cool/*&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;catchall.tsx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// å¦‚æœä½ è¦åµŒå¥—è·¯ç”±ï¼Œå°±åœ¨ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªå¯é€‰çš„å›è°ƒæ–¹æ³•</span>
      <span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;some/:path&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;some/route/file.js&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// - è·¯å¾„æ˜¯ç›¸å¯¹äºçˆ¶è·¯å¾„</span>
      <span class="token comment">// - æ–‡ä»¶åä»ç„¶ç›¸å¯¹äº app è·¯å¾„è€Œä¸æ˜¯çˆ¶è·¯å¾„</span>
      <span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;relative/path&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;some/other/file&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ä¸‹é¢è¿™ä¸ªæ˜¯æˆ‘å†™çš„ demo ä¾‹å­</span>
  <span class="token keyword">async</span> <span class="token function">routes</span><span class="token punctuation">(</span><span class="token parameter">defineRoutes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">defineRoutes</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">route</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;test/:path&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;routes/test/index.tsx&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;relative/child1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;routes/test/child.tsx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;relative/child2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;routes/test/child2.tsx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨ <code>routes/</code> ä¸‹é¢åˆ›å»º test æ–‡ä»¶å¤¹</p> <div class="language- extra-class"><pre class="language-text"><code>test
â”œâ”€â”€ index.tsx
â”œâ”€â”€ child.tsx
â””â”€â”€ child2.tsx
</code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// index.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Outlet <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;remix&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">TestIndexRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      Test remix.config.js define nested routes </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Outlet</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// child.tsx</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">ChildRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Child1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// child2.tsx</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">ChildRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Child2</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>http://localhost:3000/test/</code> åŠ ä¸Šä»»æ„è·¯å¾„éƒ½ä¼šåŒ¹é…åˆ° <code>test/index.tsx</code> è¿™ä¸ªæ–‡ä»¶</p> <p><code>http://localhost:3000/test/1234/relative/chlid1</code> ä¼šåŒ¹é…åˆ° <code>test/child.tsx</code> è¿™ä¸ªæ–‡ä»¶</p> <p><img src="https://gitee.com/SKADaddy/pic/raw/master/image-20211213173334623.png" alt="image-20211213173334623"></p> <p>å¦ä¸€ç§æ˜¯å®˜æ–¹æ•™ç¨‹æ¼”ç¤ºçš„åŸºäºæ–‡ä»¶çš„è·¯ç”±</p> <p>æŠŠæ–‡ä»¶æ”¾åˆ° <code>app/routes/</code> æ–‡ä»¶å¤¹é‡Œé¢ï¼Œè¿™äº›æ–‡ä»¶è¢«ç§°ä¸ºâ€œè·¯ç”±æ¨¡å—â€å¹¶ä¸”åº”è¯¥éµå¾ª Remix çš„ <a href="https://remix.run/docs/en/v1.0.6/api/conventions#route-filenames" target="_blank" rel="noopener noreferrer">æ–‡ä»¶è·¯ç”±å‘½åè§„èŒƒ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="è·¯ç”±æ–‡ä»¶å‘½å"><a href="#è·¯ç”±æ–‡ä»¶å‘½å" class="header-anchor">#</a> è·¯ç”±æ–‡ä»¶å‘½å</h4> <ul><li><p><strong><code>app/root.tsx</code></strong> æ ¹è·¯ç”±</p></li> <li><p><strong><code>app/routes/*.{js,ts,jsx,tsx,md,mdx}</code></strong> : ä»»ä½•åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢çš„æ–‡ä»¶éƒ½ä¼šå˜æˆåº”ç”¨çš„è·¯ç”±ï¼ŒRemix å¤©ç„¶æ”¯æŒè¿™äº›åç¼€åçš„æ–‡ä»¶</p></li> <li><p><strong><code>app/routes/{folder}/*.tsx</code></strong> : åœ¨æ–‡ä»¶å¤¹é‡Œé¢çš„æ–‡ä»¶ä¼šåˆ›å»ºåµŒå¥—è·¯ç”±</p></li> <li><p><strong><code>app/routes/{folder}</code> å’Œ <code>app/routes/{folder}.tsx</code>çš„è”åŠ¨</strong> : å½“åœ¨ <code>app/routes/</code> æ–‡ä»¶å¤¹é‡Œé¢æœ‰ä¸€ä¸ªæ–‡ä»¶çš„åç§°å’Œæ–‡ä»¶å¤¹çš„åç§°ç›¸åŒçš„æ—¶å€™ï¼Œè¿™ä¸ªæ–‡ä»¶å°±ä¼šä½œä¸ºä¸€ä¸ª <code>layout</code> æœåŠ¡äºæ–‡ä»¶å¤¹é‡Œé¢çš„æ–‡ä»¶è·¯ç”±ã€‚åœ¨ <code>{folder}.tsx</code> é‡Œé¢æ¸²æŸ“ä¸€ä¸ª <code>&lt;Outlet /&gt;</code> ï¼Œé‚£ä¹ˆå­è·¯ç”±å°±ä¼šæ¸²æŸ“æ›¿æ¢ <code>&lt;Outlet /&gt;</code>ç»„ä»¶æ¸²æŸ“å‡ºæ¥ã€‚å¾€åçœ‹ä¼šæœ‰æ¼”ç¤º</p></li> <li><p><strong>åœ¨æ–‡ä»¶åé‡ŒåŠ  <code>.</code></strong> : åœ¨æ–‡ä»¶åé‡Œé¢åŠ ä¸€ä¸ª <code>.</code> ä¼šåˆ›å»ºä¸€ä¸ªåµŒå¥—è·¯ç”±çš„è·¯å¾„ï¼Œä½†æ˜¯å®ƒçš„ <code>layout</code> æ¸²æŸ“ä¸ä¼šæ¸²æŸ“åœ¨ <code>{folder.tsx}</code> çš„ <code>&lt;Outlet /&gt;</code> ä¸Šé¢ã€‚ä¾‹å¦‚ <a href="https://remix.run/docs/en/v1/tutorials/jokes#routes" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ•™ç¨‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> çš„ <code>jokes.funny.tsx</code> ä¼šåˆ›å»ºä¸€ä¸ª <code>/jokes/funny</code> çš„ URL è·¯å¾„ï¼Œå®ƒå±äº <code>/jokes</code> çš„å­è·¯ç”±ã€‚</p></li> <li><p><strong><code>index.tsx</code></strong> : å½“çˆ¶è·¯å¾„å®Œå…¨åŒ¹é…çš„æ—¶å€™å°±ä¼šé»˜è®¤å±•ç¤ºã€‚</p></li> <li><p><strong><code>$param</code></strong> : $ è¡¨ç¤º URL çš„åŠ¨æ€éƒ¨åˆ†ï¼ŒRemix ä¼šå¸®æˆ‘ä»¬è§£æå¹¶ä¼ é€’åˆ° <code>loader</code> å‡½æ•°å’Œè·¯ç”±å½“ä¸­ã€‚ä¾‹å¦‚ <code>app/routes/users/$userId.tsx</code> å½“åŒ¹é…åˆ°æµè§ˆå™¨çš„è·¯å¾„ä¸º <code>/users/1234</code> çš„æ—¶å€™ï¼Œ<code>export const loader: LoaderFunction = async ({ params }) =&gt; {}</code> ä¸­çš„ <code>params.userId === '1234'</code></p></li> <li><p><strong><code>app/routes/files/$.tsx</code></strong> : ä¼šæ•è·æ‰€æœ‰ <code>files/*</code> çš„è·¯å¾„ï¼Œæˆ‘ä»¬å†™ä¸ªç®€å•çš„ä¾‹å­è§£é‡Šä¸€ä¸‹</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// routes/test.tsx</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">TestRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">test</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// routes/test.$.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> LoaderFunction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;remix&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> loader<span class="token operator">:</span> <span class="token function-variable function">LoaderFunction</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Test$Route</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">catch rest route</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ä¸Šé¢çš„ remix.config.js é‡Œé¢çš„ route('test/:path') éœ€è¦ä¿®æ”¹ï¼Œä¸ç„¶ä¼šåŒ¹é…åˆ°æ‰€æœ‰è·¯å¾„</span>
<span class="token keyword">async</span> <span class="token function">routes</span><span class="token punctuation">(</span><span class="token parameter">defineRoutes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">defineRoutes</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">route</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// route(&quot;test/:path&quot;, &quot;routes/test/index.tsx&quot;, () =&gt; {</span>
      <span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;test/haha&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;routes/test/index.tsx&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;relative/child1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;routes/test/child.tsx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;relative/child2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;routes/test/child2.tsx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// test/haha è·³è½¬åˆ° routes/test/index.tsx</span>
<span class="token comment">// test/haha1 è·³è½¬åˆ° routes/test.$.tsx Loader å‡½æ•°è·å–å‚æ•° params === { '*': 'haha1' }</span>
<span class="token comment">// test/haha1/123 è·³è½¬åˆ° routes/test.$.tsx params === { '*': 'haha1/123' }</span>
<span class="token comment">// test/haha1/123?id=aab è·³è½¬åˆ° routes/test.$.tsx params === { '*': 'haha1/123' }</span>
</code></pre></div></li> <li><p><strong><code>app/routes/__some-layout/some-path.tsx</code></strong> : æ–‡ä»¶å¤¹åç§°å¦‚æœå¸¦æœ‰ <code>__</code> çš„å‰ç¼€ä¼šåˆ›å»ºä¸€ä¸ª â€œLayout Routeâ€ ï¼Œè¿™ä¸ª Layout Route æ˜¯ â€œå‡â€ çš„ï¼Œå½“ä½ çš„ URL æ˜¯ <code>/some-layout</code> æˆ– <code>/__some-layout</code> çš„æ—¶å€™æ˜¯ä¸ä¼šåŒ¹é…ä¸Šçš„ï¼Œå¦‚æœä½ çš„è·¯å¾„æ˜¯ <code>/some-path</code> çš„æ—¶å€™ä¼šåŒ¹é…ä¸Šï¼Œå¹¶ä¸”ä¼šä»¥ <code>some-latout</code> ä¸ºçˆ¶è·¯ç”±å±•ç¤ºåœ¨å®ƒçš„ <code>&lt;Outlet /&gt;</code> ä¸Šé¢ã€‚</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code>â”œâ”€â”€ app
â”‚   â”œâ”€â”€ routes
â”‚   â”‚   â”œâ”€â”€ __layout
â”‚   â”‚   â”‚   â”œâ”€â”€ lmao.tsx
â”‚   â”‚   â”œâ”€â”€__layout.tsx
</code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// __layout.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Outlet <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;remix&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">LayoutRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      __Layout </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Outlet</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// lmao.tsx</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">LmaoRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">LMAO</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// localhost:3000/__layout å°†ä¼šæ˜¯ 404</span>
</code></pre></div><p><img src="https://gitee.com/SKADaddy/pic/raw/master/image-20211215100235886.png" alt="image-20211215100235886"></p> <h3 id="æ ·å¼"><a href="#æ ·å¼" class="header-anchor">#</a> æ ·å¼</h3> <p>é€šå¸¸ä¸ºäº†è®©æˆ‘ä»¬çš„ç½‘é¡µå˜å¾—æ›´æ¼‚äº®ï¼Œæˆ‘ä»¬éœ€è¦å†™ä¸€äº› css æ¥ç¾åŒ–æˆ‘ä»¬çš„ç½‘ç«™ã€‚æˆ‘ä»¬æ·»åŠ ç±»ä¼¼ <code>&lt;link rel=&quot;stylesheet&quot; href=&quot;/path-to-file.css&quot; /&gt;</code> çš„æ ‡ç­¾æ¥åŠ è½½æˆ‘ä»¬çš„ css æ–‡ä»¶ï¼ŒRemix ä¹Ÿæ˜¯ç”¨åŒæ ·çš„æ–¹æ³•æ¥åŠ è½½ css æ–‡ä»¶ã€‚ä½†æ˜¯ Remix æ›´å¼ºå¤§çš„æ˜¯ï¼ŒæŠŠåµŒå¥—è·¯ç”±çš„åŠŸèƒ½ä¹Ÿæ”¯æŒ css è¿™æ„å‘³ç€åªæœ‰åœ¨å½“å‰å­è·¯ç”±æ¿€æ´»çš„æ—¶å€™æ‰ä¼šåŠ è½½å¯¹åº”çš„ cssï¼Œå½“ç”¨æˆ·ç¦»å¼€å½“å‰é¡µé¢æˆ–è€…è¯´è·³è½¬åˆ°ä¸åŒçš„è·¯ç”±çš„æ—¶å€™ï¼Œ<code>&lt;link&gt;</code> æ ‡ç­¾å°†ä¼šè¢«ç§»é™¤ã€‚</p> <p>æˆ‘ä»¬å¯ä»¥åœ¨å¯¹åº”çš„è·¯ç”±æ–‡ä»¶é‡Œé¢å¯¼å‡º <a href="https://remix.run/docs/en/v1.0.6/api/conventions#links" target="_blank" rel="noopener noreferrer">links<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å‡½æ•°ï¼Œå¤åˆ¶ç²˜è´´ <a href="https://remix.run/docs/en/v1/tutorials/jokes#styling" target="_blank" rel="noopener noreferrer">å®˜ç½‘çš„ä»£ç <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> LinksFunction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;remix&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> stylesUrl <span class="token keyword">from</span> <span class="token string">&quot;../styles/index.css&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// å…³é”®çš„ä»£ç æ˜¯è¿™éƒ¨åˆ†ï¼ŒæŠŠ links export å‡ºå»</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> links<span class="token operator">:</span> <span class="token function-variable function">LinksFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> rel<span class="token operator">:</span> <span class="token string">&quot;stylesheet&quot;</span><span class="token punctuation">,</span> href<span class="token operator">:</span> stylesUrl <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>ä½†æ˜¯ç°åœ¨ä½ è®¿é—® <a href="http://localhost:3000" target="_blank" rel="noopener noreferrer">http://localhost:3000<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ä½ ä¼šå‘ç°æ ·å¼å¹¶æ²¡æœ‰ç”Ÿæ•ˆã€‚å› ä¸º <code>root.tsx</code> æ˜¯æ¸²æŸ“æ‰€æœ‰ä¸œè¥¿çš„æ ¹ç»“ç‚¹ï¼ŒåŒ…å« <code>&lt;html&gt;</code> <code>&lt;/html&gt;</code> ä¹‹é—´ï¼Œä»¥ä¸ºç€åŠ è½½ css æ–‡ä»¶çš„ <code>&lt;link&gt;</code> æ ‡ç­¾éœ€è¦æˆ‘ä»¬è‡ªå·±æ·»åŠ ä¸Šå»ï¼Œè€Œè¿™ä¸ª Remix å·²ç»å¸®æˆ‘ä»¬å°è£…å¥½äº†ï¼Œ<code>&lt;Links&gt;</code> ç»„ä»¶ï¼ŒRemix ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨æŠŠå½“å‰è·¯ç”±æ¿€æ´»çš„æ—¶å€™åŠ è½½å¯¹åº”çš„ css æ–‡ä»¶ã€‚å¼•å…¥ <code>Links</code> ç»„ä»¶å¹¶ä¸”æŠŠå®ƒæ”¾åˆ° <code>&lt;head&gt;</code> æ ‡ç­¾é‡Œé¢å°±å¯ä»¥çœ‹åˆ°æ ·å¼ç”Ÿæ•ˆäº†ã€‚</p> <p><img src="https://gitee.com/SKADaddy/pic/raw/master/jokes-no-styles.png" alt="The jokes page with no background gradient"></p> <p>å½“ä½ åˆ‡æ¢åˆ°å…¶ä»–è·¯å¾„çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°ä¹‹å‰ index é¡µé¢çš„ css æ ·å¼å·²ç»æ¶ˆå¤±äº†ï¼Œå¦‚æœä½ æŒ‰ <kbd>F12</kbd> æ‰“å¼€æ§åˆ¶å°çš„ element tabï¼Œä½ ä¼šå‘ç° <code>&lt;head&gt;</code> æ ‡ç­¾é‡Œé¢çš„ <code>&lt;link&gt;</code> æ ‡ç­¾å·²ç»è¢«ç§»é™¤äº†ã€‚</p> <blockquote><p>è¿™æ„å‘³ç€ä½ åœ¨å†™ css çš„æ—¶å€™ä½ ä¸éœ€è¦æ‹…å¿ƒ css å†²çªçš„é—®é¢˜ï¼Œè¿™ä¹Ÿæ„å‘³ç€ä½ çš„ css å¯ä»¥é•¿æœŸç¼“å­˜å¹¶ä¸”å¤©ç„¶çš„ä»£ç åˆ†ç¦»çš„</p></blockquote> <p>å®˜ç½‘çš„ä»£ç é‡Œé¢æ¯”è¾ƒç¥å¥‡çš„æ˜¯ <code>global-large.css</code> å’Œ <code>global-medium.css</code> ï¼Œç‚¹è¿›å»ä½ ä»¬ä¼šå‘ç°æ–‡ä»¶é‡Œé¢å¹¶æ²¡æœ‰ç”¨åˆ°åª’ä½“æŸ¥è¯¢çš„ç›¸å…³è¯­æ³•ï¼Œé‚£ä¹ˆå®ƒæ˜¯æ€ä¹ˆçŸ¥é“åœ¨ä»€ä¹ˆæ—¶å€™åº”ç”¨å¯¹åº”çš„ css æ–‡ä»¶å‘¢ï¼Ÿ</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">const</span> links<span class="token operator">:</span> <span class="token function-variable function">LinksFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      rel<span class="token operator">:</span> <span class="token string">&quot;stylesheet&quot;</span><span class="token punctuation">,</span>
      href<span class="token operator">:</span> globalStylesUrl<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      rel<span class="token operator">:</span> <span class="token string">&quot;stylesheet&quot;</span><span class="token punctuation">,</span>
      href<span class="token operator">:</span> globalMediumStylesUrl<span class="token punctuation">,</span>
      media<span class="token operator">:</span> <span class="token string">&quot;print, (min-width: 640px)&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      rel<span class="token operator">:</span> <span class="token string">&quot;stylesheet&quot;</span><span class="token punctuation">,</span>
      href<span class="token operator">:</span> globalLargeStylesUrl<span class="token punctuation">,</span>
      media<span class="token operator">:</span> <span class="token string">&quot;screen and (min-width: 1024px)&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>å…¶å®å¾ˆå¤šäººåº”è¯¥æ²¡æœ‰åœ¨ <code>&lt;link&gt;</code> æ ‡ç­¾ä½¿ç”¨è¿‡åª’ä½“æŸ¥è¯¢ï¼Œ<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link" target="_blank" rel="noopener noreferrer">mdn<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å¯ä»¥æŸ¥é˜…åˆ°ç›¸å…³çš„å±æ€§ã€‚</p> <p><code>LinksFunction</code> æ”¯æŒä¸¤ç§ç±»å‹ <code>HtmlLinkDescriptor | PageLinkDescriptor</code></p> <p><code>HtmlLinkDescriptor</code> å°±æ˜¯ä¸€ç§å¯¹è±¡å½¢å¼çš„ <code>&lt;link&gt;</code> æ ‡ç­¾ï¼Œå…·ä½“å±æ€§å¯ä»¥å‚è€ƒä¸Šé¢çš„ mdn é“¾æ¥</p> <p><code>PageLinkDescriptor</code> è¿™ç§ç±»å‹çš„ LinksFunction å¯ä»¥è®©ä½ åœ¨ç”¨æˆ·å¯èƒ½è®¿é—®æŸä¸ªè·¯å¾„çš„æ—¶å€™ï¼Œæ³¨æ„æ˜¯<strong>å¯èƒ½</strong>ï¼Œæå‰åŠ è½½ç›¸åº”çš„ JavaScript æ¨¡å—ï¼Œloader æ•°æ®è¿˜æœ‰æ ·å¼åˆ°æµè§ˆå™¨çš„ç¼“å­˜é‡Œé¢ã€‚</p> <h3 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="header-anchor">#</a> æ•°æ®åº“</h3> <p>çœŸæ­£çš„å¼€å‘ä¸€ä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½éœ€è¦å­˜å‚¨æ•°æ®ï¼Œåœ¨å®˜ç½‘çš„æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šç”¨æˆ‘ä»¬è‡ªå·±çš„ <a href="https://sqlite.org/index.html" target="_blank" rel="noopener noreferrer">SQLite<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ•°æ®åº“è€Œä¸æ˜¯ä¸€äº›ç¬¬ä¸‰æ–¹æä¾›çš„æŒä¹…åŒ–è§£å†³æ–¹æ¡ˆã€‚</p> <h4 id="è®¾ç½®-prisma"><a href="#è®¾ç½®-prisma" class="header-anchor">#</a> è®¾ç½® Prisma</h4> <p>å¦‚æœä½ ç”¨çš„æ˜¯ VSCodeï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨æ’ä»¶å¸‚åœºæœç´¢ prisma æ¥å®‰è£…ä»–ä»¬çš„æ’ä»¶ï¼Œè¿™æ ·ç­‰ä¼šå†™ prisma ç›¸å…³è¯­æ³•çš„æ—¶å€™ä¼šæœ‰ç›¸åº”æç¤ºï¼Œéå¸¸çš„æ–¹ä¾¿ã€‚Prisma æ˜¯ä¸€æ¬¾å¯¹è±¡å…³ç³»æ˜ å°„æ•°æ®åº“ï¼ˆObject Relational Mappingï¼‰ï¼Œå¯¹äºä¸æ˜¯å¾ˆç†Ÿæ‚‰æ•°æ®åº“çš„åŒå­¦æ¯”è¾ƒå‹å¥½ã€‚</p> <p>ç°åœ¨æˆ‘ä»¬éœ€è¦å®‰è£…ä¸¤ä¸ªåŒ…ï¼Œè¿™æ ·å°±å¯ä»¥ç»§ç»­æˆ‘ä»¬çš„æ•™ç¨‹äº†</p> <div class="language- extra-class"><pre class="language-text"><code>npm install --save-dev prisma
npm install @prisma/client
</code></pre></div><p>ç„¶ååˆå§‹åŒ–</p> <div class="language- extra-class"><pre class="language-text"><code>npx prisma init --datasource-provider sqlite
</code></pre></div><p>æ¥ç€ç»ˆç«¯ä¼šæ‰“å°ä¸‹é¢çš„æ–‡æœ¬ï¼Œæˆ‘ä»¬å°±åˆå§‹åŒ–æˆåŠŸäº†</p> <div class="language- extra-class"><pre class="language-text"><code>âœ” Your Prisma schema was created at prisma/schema.prisma
  You can now open it in your favorite editor.

warn You already have a .gitignore. Don't forget to exclude .env to not commit any secret.

Next steps:
1. Set the DATABASE_URL in the .env file to point to your existing database. If your database has no tables yet, read https://pris.ly/d/getting-started
2. Run prisma db pull to turn your database schema into a Prisma schema.
3. Run prisma generate to generate the Prisma Client. You can then start querying your database.

More information in our documentation:
https://pris.ly/d/getting-started
</code></pre></div><p>å¤åˆ¶ç²˜è´´æ•™ç¨‹çš„ä»£ç åè¿è¡Œ</p> <div class="language- extra-class"><pre class="language-text"><code>npx prisma db push
</code></pre></div><p>æˆ‘ä»¬çš„æ•°æ®åº“æ–‡ä»¶å°±ä¼šè¢«åˆ›å»ºå‡ºæ¥ <code>prisma/dev.db</code> ï¼Œé‡è¦çš„æ˜¯ä»–ä¼šå¸®æˆ‘ä»¬ç”Ÿæˆå¥½å¯¹åº”çš„ TypeScript ç±»å‹ï¼Œè¿™æ ·æˆ‘ä»¬å¼€å‘æœŸé—´è°ƒç”¨ prisma çš„ API çš„æ—¶å€™å°±ä¼šæœ‰å¯¹åº”çš„ä»£ç æç¤ºã€‚</p> <p>æŠŠ <code>prisma/dev.db</code> å’Œä¸Šé¢ç»ˆç«¯æ‰“å°è¯´çš„ <code>.env</code> åŠ è¿› <code>.gitignore</code> æ–‡ä»¶é‡Œé¢ ã€‚</p> <blockquote><p>å¦‚æœæ•°æ®åº“è£‚äº†æˆ–è€…çƒ‚äº†å¯ä»¥ç›´æ¥åˆ æ‰ dev.db ç„¶åè¿è¡Œ <code>npx prisma db push</code></p></blockquote> <p>ç„¶åæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€äº›åˆ°æ•°æ®åº“é‡Œé¢ï¼Œåˆ›å»ºä¸€ä¸ª <code>prisma/seed.ts</code> æ–‡ä»¶</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PrismaClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@prisma/client&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrismaClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">seed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>
    <span class="token function">getJokes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>joke<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> db<span class="token punctuation">.</span>joke<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token operator">:</span> joke <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">seed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getJokes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// shout-out to https://icanhazdadjoke.com/</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&quot;Road worker&quot;</span><span class="token punctuation">,</span>
      content<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">I never wanted to believe that my Dad was stealing from his job as a road worker. But when I got home, all the signs were there.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&quot;Frisbee&quot;</span><span class="token punctuation">,</span>
      content<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">I was wondering why the frisbee was getting bigger, then it hit me.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&quot;Trees&quot;</span><span class="token punctuation">,</span>
      content<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Why do trees seem suspicious on sunny days? Dunno, they're just a bit shady.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&quot;Skeletons&quot;</span><span class="token punctuation">,</span>
      content<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Why don't skeletons ride roller coasters? They don't have the stomach for it.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&quot;Hippos&quot;</span><span class="token punctuation">,</span>
      content<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Why don't you find hippopotamuses hiding in trees? They're really good at it.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&quot;Dinner&quot;</span><span class="token punctuation">,</span>
      content<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">What did one plate say to the other plate? Dinner is on me!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&quot;Elevator&quot;</span><span class="token punctuation">,</span>
      content<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My first time using an elevator was an uplifting experience. The second time let me down.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å®‰è£… <code>esbuilder-register</code></p> <div class="language- extra-class"><pre class="language-text"><code>npm install --save-dev esbuild-register
</code></pre></div><p>ç„¶åè¿è¡Œ <code>seed.ts</code></p> <div class="language- extra-class"><pre class="language-text"><code>node --require esbuild-register prisma/seed.ts
</code></pre></div><p>ç°åœ¨æˆ‘ä»¬çš„æ•°æ®åº“é‡Œé¢å°±ä¼šæœ‰ä¸Šé¢æ–‡ä»¶å†™çš„æ•°æ®äº†ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤å°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„è¡¨å’Œæ•°æ®</p> <div class="language- extra-class"><pre class="language-text"><code>npx prisma studio
</code></pre></div><p>ä½†æ˜¯å¦‚æœä½ é‡ç½®æ•°æ®åº“ä¹‹åå°±ä¼šæ²¡æœ‰æ•°æ®ï¼Œåˆè¦é‡æ–°è·‘ä¸€éä¸Šé¢çš„å‘½ä»¤ï¼Œä½ å¯ä»¥åœ¨ <code>package.json</code> é‡Œé¢æ·»åŠ å‘½ä»¤ï¼Œè¿™æ ·ä½ å°±ä¸ç”¨æ¯æ¬¡éƒ½æ‰§è¡Œä¸€æ¬¡äº†ã€‚</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// ...</span>
  <span class="token property">&quot;prisma&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;seed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node --require esbuild-register prisma/seed.ts&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token comment">// ...</span>

</code></pre></div><h4 id="è¿æ¥æ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“" class="header-anchor">#</a> è¿æ¥æ•°æ®åº“</h4> <p>å¦‚æœä½ æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤æ¥é“¾æ¥æ•°æ®åº“</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PrismaClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@prisma/client&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrismaClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™æ ·ç¡®å®å¯ä»¥è¿æ¥åˆ°æ•°æ®åº“ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬å¼€å‘æœŸé—´ï¼Œ<code>@remix-run/serve</code> ä¼šå¸®æˆ‘ä»¬é‡æ–°æ‰“åŒ…ï¼Œè¿™æ ·çš„è¯æ¯æ¬¡æˆ‘ä»¬çš„ä»£ç æ›´æ–°ï¼Œå°±ä¼šå’Œæ•°æ®åº“æ–°å»ºä¸€ä¸ªé“¾æ¥ï¼Œæœ€ç»ˆ Prisma ä¼šå‘å‡ºè­¦å‘Š Warning: 10 Prisma Clients are already running.ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–‡ä»¶åä¸º <code>app/utils/db.server.ts</code></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PrismaClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@prisma/client&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> db<span class="token operator">:</span> PrismaClient<span class="token punctuation">;</span>

<span class="token keyword">declare</span> global <span class="token punctuation">{</span>
  <span class="token keyword">var</span> __db<span class="token operator">:</span> PrismaClient <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// this is needed because in development we don't want to restart</span>
<span class="token comment">// the server with every change, but we want to make sure we don't</span>
<span class="token comment">// create a new connection to the DB with every change either.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrismaClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  db<span class="token punctuation">.</span><span class="token function">$connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>global<span class="token punctuation">.</span>__db<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    global<span class="token punctuation">.</span>__db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrismaClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    global<span class="token punctuation">.</span>__db<span class="token punctuation">.</span><span class="token function">$connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  db <span class="token operator">=</span> global<span class="token punctuation">.</span>__db<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> db <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™é‡Œé¢æœ‰ä¸€ä¸ª Remix å®šä¸‹çš„è§„èŒƒï¼Œå°±æ˜¯å¸¦æœ‰ <code>.server</code> çš„æ–‡ä»¶æœ€ç»ˆæ˜¯ä¸ä¼šè¢«æ‰“åŒ…è¿›å®¢æˆ·ç«¯çš„ä»£ç ã€‚</p> <h4 id="åœ¨-loader-ä¸­è¯»å–æ•°æ®åº“çš„æ•°æ®"><a href="#åœ¨-loader-ä¸­è¯»å–æ•°æ®åº“çš„æ•°æ®" class="header-anchor">#</a> åœ¨ loader ä¸­è¯»å–æ•°æ®åº“çš„æ•°æ®</h4> <p>åœ¨ Remix ä¸­ï¼Œæ¯ä¸ªè·¯ç”±æ¨¡å—éƒ½å¯ä»¥é€šè¿‡å¯¼å‡ºä¸€ä¸ª <a href="https://remix.run/docs/en/v1.0.6/api/conventions#loader" target="_blank" rel="noopener noreferrer">loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å‡½æ•°æ¥è·å–æ•°æ®ï¼Œloader å‡½æ•°ä¼šåœ¨æœåŠ¡ç«¯è¢«è°ƒç”¨ã€‚</p> <h5 id="params"><a href="#params" class="header-anchor">#</a> params</h5> <p>è·¯ç”±çš„å‚æ•°ä¼šä¼ é€’åˆ° loader å‡½æ•°å½“ä¸­</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// if the user visits /invoices/123</span>
<span class="token keyword">export</span> <span class="token keyword">let</span> loader<span class="token operator">:</span> <span class="token function-variable function">LoaderFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> params <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  params<span class="token punctuation">.</span>invoiceId<span class="token punctuation">;</span> <span class="token comment">// &quot;123&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="request"><a href="#request" class="header-anchor">#</a> request</h5> <p>è¿™ä¸ªå‚æ•°æ˜¯å¸¦æœ‰è¯·æ±‚ä¿¡æ¯çš„ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" target="_blank" rel="noopener noreferrer">Fetch Request<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å®ä¾‹ï¼Œå¯ä»¥å‚è€ƒ mdn æ–‡æ¡£çš„å±æ€§ä»‹ç»ã€‚ä¸€èˆ¬è¿™ä¸ªå‚æ•°æ˜¯ç”¨æ¥è¯»å– headers é‡Œé¢çš„å†…å®¹æˆ–è€…å½“å‰ URL è·¯å¾„</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">let</span> loader<span class="token operator">:</span> <span class="token function-variable function">LoaderFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> request <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// read a cookie</span>
  <span class="token keyword">let</span> cookie <span class="token operator">=</span> request<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;Cookie&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// parse the search params</span>
  <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> search <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;search&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="context"><a href="#context" class="header-anchor">#</a> context</h5> <p>è¿™ä¸ª context å±æ€§ä½ å¯ä»¥åœ¨æœåŠ¡ç«¯é€‚é…å™¨çš„ <code>getLoadContext()</code> å‡½æ•°é‡Œé¢è·å–åˆ°ï¼Œå¯ä»¥å¡«è¡¥é€‚é…å™¨çš„ Request/Response API ä¹‹é—´çš„ç©ºç™½ï¼ˆä¸€ä¸ªç±»ä¼¼åé—¨çš„å±æ€§ï¼Œä¸€èˆ¬æ¥è¯´ä¸éœ€è¦ç”¨åˆ°ï¼‰</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> createRequestHandler <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@remix-run/express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>
  <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span>
  <span class="token function">createRequestHandler</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">getLoadContext</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// this becomes the loader context</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> expressUser<span class="token operator">:</span> req<span class="token punctuation">.</span>user <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ç„¶åä½ å¯ä»¥åœ¨ loader ä¸­è·å–åˆ°</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">let</span> loader<span class="token operator">:</span> <span class="token function-variable function">LoaderFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> context <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> expressUser <span class="token punctuation">}</span> <span class="token operator">=</span> context<span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨å®˜ç½‘è·å– jokes çš„ä¾‹å­ä¸­ï¼Œé¦–å…ˆå…ˆå¯¼å‡ºä¸€ä¸ª loader å‡½æ•°ï¼Œç„¶åä»æ•°æ®åº“ä¸­è·å–æ•°æ®ï¼Œå¹¶æŠŠå®ƒä»¥ä¸€ä¸ªå¯¹è±¡è¿”å›å‡ºå»ï¼Œåœ¨è·¯ç”±ä¸­é€šè¿‡ <code>useLoaderData()</code> æ¥è·å–æ•°æ®æœ€ç»ˆæ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚</p> <h3 id="æ•°æ®æäº¤"><a href="#æ•°æ®æäº¤" class="header-anchor">#</a> æ•°æ®æäº¤</h3> <p>å®˜ç½‘çš„ä¾‹å­ä¸­ä½¿ç”¨äº†ä¸€ä¸ªåŸç”Ÿçš„ HTML form è¡¨å•ï¼Œç›¸ä¿¡ç°åœ¨å¾ˆå¤šäººéƒ½æ˜¯ä½¿ç”¨ Vue æˆ–è€… React ä½œä¸ºå‰ç«¯æ¡†æ¶æ¥è¿›è¡Œå¼€å‘ï¼Œæœ‰ç€ä¼—å¤šçš„å¼€æº UI åº“ä»¥åŠ axios è¿™ç§å°è£…å¥½çš„è¯·æ±‚åº“ï¼Œå¾ˆå°‘äººä¼šå†ç”¨åˆ° form è¡¨å•è¿™ç§æ¯”è¾ƒåŸå§‹çš„æ•°æ®æäº¤æ–¹å¼ã€‚ä½†æ˜¯åœ¨ Remix ä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦å®‰è£…ä¸€äº›æ¼‚äº®çš„ UI åº“ä»¥åŠ axios ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¼å‡ºä¸€ä¸ª <code>action</code> å‡½æ•°ã€‚</p> <p>åƒä¸Šé¢æåŠçš„ <code>loader</code> ä¸€æ ·ï¼Œaction æ˜¯åœ¨æœåŠ¡ç«¯è°ƒç”¨çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä¸€èˆ¬ç”¨æ¥å¤„ç†æµè§ˆå™¨ä¼ é€’è¿‡æ¥çš„æ•°æ®æˆ–è€…åšä¸€äº›å…¶ä»–æ“ä½œã€‚åªè¦ä¸æ˜¯ GET è¯·æ±‚ï¼Œè¿™ä¸ª action å‡½æ•°éƒ½ä¼šè¢«è°ƒç”¨ï¼Œè°ƒç”¨æ—¶é—´æ—©äº loaderã€‚</p> <p>action çš„ API å’Œ loader å·®ä¸å¤šï¼Œä¸åŒçš„åœ°æ–¹æ˜¯ä»–ä»¬è°ƒç”¨çš„æ—¶æœºä¸å¤ªä¸€æ ·ã€‚</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> ActionFunction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;remix&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> redirect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;remix&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> db <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;~/utils/db.server&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> action<span class="token operator">:</span> <span class="token function-variable function">ActionFunction</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">formData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> name <span class="token operator">=</span> form<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> content <span class="token operator">=</span> form<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// we do this type check to be extra sure and to make TypeScript happy</span>
  <span class="token comment">// we'll explore validation next!</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> name <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> content <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Form not submitted correctly.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> fields <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> content <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> joke <span class="token operator">=</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span>joke<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token operator">:</span> fields <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/jokes/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>joke<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">NewJokeRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Add your own hilarious joke</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            Name: </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            Content: </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            Add
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åƒ <code>form.get(&quot;name&quot;)</code> è¿™ç§ä»£ç å¤§å®¶å¯èƒ½æ¯”è¾ƒé™Œç”Ÿï¼Œè¿™äº›éƒ½æ˜¯åŸç”Ÿçš„ Web APIï¼Œè¿™å°±æ˜¯ Remix è¿™ä¸ªæ¡†æ¶çš„ä¼˜ç‚¹ä¹‹ä¸€ï¼Œéšç€é€æ¸å­¦ä¹ ï¼Œä½ å°†ä¼šæ›´åŠ äº†è§£ Web ç›¸å…³çš„ä¸œè¥¿ï¼Œè€Œä¸æ˜¯æ–°å­¦ä¸€ä¸ªæ¡†æ¶ï¼Œé‚£æˆ‘è¿™ä¸ªæ¡†æ¶çš„è®¸å¤šä¸œè¥¿éƒ½åªèƒ½å±€é™äºè¿™ä¸€å¥—ç”Ÿæ€é‡Œé¢äº†ï¼Œå­¦ä¹ æˆæœ¬ä¹Ÿæ²¡æœ‰é‚£ä¹ˆçš„å¤§ã€‚</p> <blockquote><p>è¿™é‡Œé¢çš„ <code>redirect</code> å‡½æ•°æ˜¯ Remix æä¾›çš„ä¸€ä¸ªç®€æ˜“å·¥å…·ç”¨æ¥åˆ›å»ºä¸€ä¸ªæœ‰æ­£ç¡®çš„è¿”å›ç å’Œè¯·æ±‚çŠ¶æ€çš„ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response" target="_blank" rel="noopener noreferrer">Response<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼Œå¹¶å°†å®ƒé‡å®šå‘ç»™ç”¨æˆ·</p></blockquote> <p>action çš„è¿”å›å€¼å’Œ loader ä¸€æ ·ï¼Œå¯ä»¥æ¥å—ä¸€ä¸ªå¯ä»¥åºåˆ—åŒ–çš„å¯¹è±¡æˆ–è€…ä¸€ä¸ª Responseï¼Œåƒä¸‹é¢çš„æ ¡éªŒè¡¨å•å°±æŠŠè¡¨å•æ ¡éªŒçš„é”™è¯¯åœ¨ç»„ä»¶ä¸­é€šè¿‡ <code>useActionData</code> å‡½æ•°æ¥è·å–å¹¶æ¸²æŸ“åˆ° React ç»„ä»¶ä¸Šã€‚</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> ActionFunction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;remix&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useActionData<span class="token punctuation">,</span> redirect<span class="token punctuation">,</span> json <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;remix&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> db <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;~/utils/db.server&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">validateJokeContent</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>content<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">That joke is too short</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">validateJokeName</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">That joke's name is too short</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ActionData</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  formError<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  fieldErrors<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    content<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  fields<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    content<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">badRequest</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token operator">:</span> ActionData</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">json</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token number">400</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> action<span class="token operator">:</span> <span class="token function-variable function">ActionFunction</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">formData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> name <span class="token operator">=</span> form<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> content <span class="token operator">=</span> form<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> name <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> content <span class="token operator">!==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">badRequest</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      formError<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Form not submitted correctly.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> fieldErrors <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token function">validateJokeName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token function">validateJokeContent</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> fields <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> content <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>fieldErrors<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">badRequest</span><span class="token punctuation">(</span><span class="token punctuation">{</span> fieldErrors<span class="token punctuation">,</span> fields <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> joke <span class="token operator">=</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span>joke<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token operator">:</span> fields <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/jokes/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>joke<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">NewJokeRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> actionData <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useActionData</span><span class="token generic class-name"><span class="token operator">&lt;</span>ActionData<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Add your own hilarious joke</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            Name:</span><span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">defaultValue</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>actionData<span class="token operator">?.</span>fields<span class="token operator">?.</span>name<span class="token punctuation">}</span></span>
              <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">aria-invalid</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">Boolean</span><span class="token punctuation">(</span>actionData<span class="token operator">?.</span>fieldErrors<span class="token operator">?.</span>name<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">undefined</span><span class="token punctuation">}</span></span>
              <span class="token attr-name">aria-describedby</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>
                actionData<span class="token operator">?.</span>fieldErrors<span class="token operator">?.</span>name <span class="token operator">?</span> <span class="token string">&quot;name-error&quot;</span> <span class="token operator">:</span> <span class="token keyword">undefined</span>
              <span class="token punctuation">}</span></span>
            <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span>actionData<span class="token operator">?.</span>fieldErrors<span class="token operator">?.</span>name <span class="token operator">?</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-validation-error<span class="token punctuation">&quot;</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alert<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name-error<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token punctuation">{</span>actionData<span class="token punctuation">.</span>fieldErrors<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            Content:</span><span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span>
              <span class="token attr-name">defaultValue</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>actionData<span class="token operator">?.</span>fields<span class="token operator">?.</span>content<span class="token punctuation">}</span></span>
              <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">aria-invalid</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>
                <span class="token function">Boolean</span><span class="token punctuation">(</span>actionData<span class="token operator">?.</span>fieldErrors<span class="token operator">?.</span>content<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">undefined</span>
              <span class="token punctuation">}</span></span>
              <span class="token attr-name">aria-describedby</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>
                actionData<span class="token operator">?.</span>fieldErrors<span class="token operator">?.</span>content <span class="token operator">?</span> <span class="token string">&quot;content-error&quot;</span> <span class="token operator">:</span> <span class="token keyword">undefined</span>
              <span class="token punctuation">}</span></span>
            <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span>actionData<span class="token operator">?.</span>fieldErrors<span class="token operator">?.</span>content <span class="token operator">?</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span>
              <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-validation-error<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alert<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content-error<span class="token punctuation">&quot;</span></span>
            <span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token punctuation">{</span>actionData<span class="token punctuation">.</span>fieldErrors<span class="token punctuation">.</span>content<span class="token punctuation">}</span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            Add
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="æƒé™"><a href="#æƒé™" class="header-anchor">#</a> æƒé™</h3> <p>å®˜ç½‘çš„ä¾‹å­æ˜¯ä½¿ç”¨ <code>bcrypt</code> æ¥è¿›è¡ŒåŠ å¯†çš„ <code>npm i bcrypt</code> å› ä¸ºæ˜¯ TypeScript å¼€å‘çš„æ‰€ä»¥è¿˜è¦å®‰è£… <code>npm install --save-dev @types/bcrypt</code></p> <h4 id="ç™»å½•è¡¨å•"><a href="#ç™»å½•è¡¨å•" class="header-anchor">#</a> ç™»å½•è¡¨å•</h4> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> LinksFunction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;remix&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> useSearchParams <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;remix&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> stylesUrl <span class="token keyword">from</span> <span class="token string">&quot;../styles/login.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> links<span class="token operator">:</span> <span class="token function-variable function">LinksFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> rel<span class="token operator">:</span> <span class="token string">&quot;stylesheet&quot;</span><span class="token punctuation">,</span> href<span class="token operator">:</span> stylesUrl <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>searchParams<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-light</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Login</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
            <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>redirectTo<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;redirectTo&quot;</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token keyword">undefined</span><span class="token punctuation">}</span></span>
          <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>legend</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sr-only<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Login or Register?</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>legend</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
                <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loginType<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">defaultChecked</span>
              <span class="token punctuation">/&gt;</span></span><span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span><span class="token plain-text">
              Login
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loginType<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>register<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"> Register
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">htmlFor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username-input<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Username</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username-input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">htmlFor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password-input<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Password</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password-input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            Submit
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>links<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Home</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/jokes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Jokes</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨å®é™…çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œä¼šæœ‰ä¸€äº›åŠŸèƒ½æ˜¯éœ€è¦ç”¨æˆ·ç™»å½•ä¹‹åæ‰èƒ½ä½¿ç”¨çš„ï¼Œå½“ç”¨æˆ·æƒ³è¦ä½¿ç”¨è¿™éƒ¨åˆ†åŠŸèƒ½çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¼šè®©ç”¨æˆ·è·³è½¬åˆ°ç™»å½•é¡µï¼Œç”¨æˆ·ç™»å½•åéœ€è¦è·³è½¬åˆ°ä¹‹å‰çš„é¡µé¢ï¼Œè€Œä¸æ˜¯é¦–é¡µã€‚åœ¨å®˜ç½‘çš„ä¾‹å­ä¸­é€šè¿‡ <code>useSearchParams</code> æ¥è·å– URL ä¸Šçš„ <code>redirectTo</code> å‚æ•°å¹¶å°†å®ƒæ”¾åˆ° <code>&lt;form&gt;</code> æ ‡ç­¾é‡Œé¢çš„ä¸€ä¸ª <code>hidden</code> çš„ <code>input</code> æ ‡ç­¾ã€‚è¿™æ ·åœ¨ <code>action</code> å‡½æ•°é‡Œé¢é€šè¿‡ <code>form.get(&quot;redirectTo&quot;)</code> è·å–åˆ°éœ€è¦é‡å®šå‘çš„è·¯å¾„ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>// example http://localhost:3000/login?redirectTo=%2Fjokes%2Fnew
console.log(useSearchParams())
[
  URLSearchParams { 'redirectTo' =&gt; '/jokes/new' },
  [Function (anonymous)]
]
</code></pre></div><p>æˆ‘ä»¬ä½¿ç”¨ kody è¿™ä¸ªè´¦å·ç™»å½•åç»ˆç«¯ä¼šæ‰“å°ä¸‹é¢è¿™äº›ä¿¡æ¯ï¼Œè¿™å°±æ„å‘³ç€æˆ‘ä»¬çš„ç™»å½•æˆåŠŸäº†ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>user: {
    id: '161cc267-da50-459b-b6dd-3bfd68820dbc',
    createdAt: '2021-12-05T04:13:26.242Z',
    updatedAt: '2021-12-05T04:13:26.242Z',
    username: 'kody',
    passwordHash: '$2b$10$K7L1OJ45/4Y2nIvhRVpCe.FSmhDdWoXehVzJptJ/op0lSsvqNu/1u'
  }
</code></pre></div><p>å®˜ç½‘ä½¿ç”¨äº† Remix è‡ªå¸¦çš„ <code>createCookieSessionStorage</code> æ¥å­˜å‚¨ï¼Œå…·ä½“ä½¿ç”¨å¯ä»¥å‚è€ƒ<a href="https://remix.run/docs/en/v1.0.6/api/remix#sessions" target="_blank" rel="noopener noreferrer">æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>éœ€è¦åœ¨ <code>.env</code> æ–‡ä»¶é‡Œé¢æ·»åŠ  <code>SESSION_SECRET=&quot;my_secret&quot;</code> å€¼å¯ä»¥éšæ„</p> <p>ç™»å½•ä¹‹åé€šè¿‡ <code>redirect</code> å‡½æ•°è·³è½¬å¹¶ä¸”åœ¨å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°é‡Œè®¾ç½® Cookie</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">createUserSession</span><span class="token punctuation">(</span><span class="token parameter">userId<span class="token operator">:</span> string<span class="token punctuation">,</span> redirectTo<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> session <span class="token operator">=</span> <span class="token keyword">await</span> storage<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  session<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">,</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span>redirectTo<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;Set-Cookie&quot;</span><span class="token operator">:</span> <span class="token keyword">await</span> storage<span class="token punctuation">.</span><span class="token function">commitSession</span><span class="token punctuation">(</span>session<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ ·åé¢çš„æ¯ä¸ªè¯·æ±‚æˆ‘ä»¬éƒ½ä¼šå¸¦ä¸Š <code>RJ_session</code>ã€‚</p> <h4 id="ç™»å‡ºé€»è¾‘"><a href="#ç™»å‡ºé€»è¾‘" class="header-anchor">#</a> ç™»å‡ºé€»è¾‘</h4> <p>æœ‰ç™»å½•é‚£ä¹ˆè‚¯å®šæœ‰é€€å‡ºç™»å½•ï¼Œç™»å‡ºéœ€è¦æ¸…æ¥š session ï¼Œç”¨çš„ <a href="https://remix.run/docs/en/v1.0.6/api/remix#using-sessions" target="_blank" rel="noopener noreferrer"><code>destroySession</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> è¿™ä¸ªæ–¹æ³•ï¼Œå…·ä½“ä»£ç å¯ä»¥çœ‹ <a href="https://remix.run/docs/en/v1/tutorials/jokes#build-logout-action" target="_blank" rel="noopener noreferrer">å®˜ç½‘çš„ä»£ç <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>å¦‚æœæ˜¯åœ¨ action é‡Œé¢é€€å‡ºç™»å½• Remix ä¼šè°ƒç”¨ loader ï¼Œä½†å¦‚æœæ˜¯ä¸€ä¸ªé“¾æ¥çš„è¯ï¼Œå°±ä¸ä¼šè§¦å‘ loader å‡½æ•°ã€‚</p> <h3 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="header-anchor">#</a> é”™è¯¯å¤„ç†</h3> <h4 id="é¢„æœŸå¤–çš„é”™è¯¯"><a href="#é¢„æœŸå¤–çš„é”™è¯¯" class="header-anchor">#</a> é¢„æœŸå¤–çš„é”™è¯¯</h4> <p>åœ¨é¡¹ç›®çœŸæ­£ä¸Šç”Ÿäº§åï¼Œæ€»æ˜¯éš¾å…ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œè¿™äº›é—®é¢˜å¯èƒ½æ˜¯æˆ‘ä»¬æ— æ³•æ„æ–™åˆ°çš„ï¼Œä¾‹å¦‚ç½‘ç»œé—®é¢˜å•Šï¼ŒæœåŠ¡å™¨æŒ‚äº†å•Šï¼ŒåŒæ—¶ç”¨äº† <code>// @ts-ignore</code> å¿½ç•¥ TypeScript çš„é¢„è­¦ã€‚</p> <p>è€Œé”™è¯¯å¤„ç†ï¼Œæ­£æ˜¯ Remix çš„ä¸€å¤§äº®ç‚¹ä¹‹ä¸€ã€‚å’Œ React çš„ <a href="https://reactjs.org/docs/error-boundaries.html#gatsby-focus-wrapper" target="_blank" rel="noopener noreferrer">Error Boundary åŠŸèƒ½<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ç±»ä¼¼ï¼ŒRemix å¯ä»¥è®©æˆ‘ä»¬å¯¼å‡ºä¸€ä¸ª Error Boundary ç»„ä»¶ï¼Œåœ¨è¿™ä¸ªç»„ä»¶é‡Œé¢å¯ä»¥å¤„ç† loader å’Œ action çš„æ•°æ®ã€‚</p> <p>å¦‚æœä½ ç›´æ¥åœ¨ root.tsx å¯¼å‡º Error Boundary ç»„ä»¶çš„è¯ï¼Œä½ ä¼šå‘ç°æ ·å¼éƒ½æ²¡äº†ï¼Œä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿå¦‚æœä½ ç‚¹å¼€ network é€‰é¡¹ï¼Œä½ ä¼šå‘ç°è¯·æ±‚å‘å›çš„é¡µé¢æ˜¯ä¸‹é¢è¿™æ ·çš„</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Oops! Something went wrong<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>lol is not defined<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>è¿™æ˜¯å› ä¸º root.tsx éœ€è¦è‡ªå·±æ¸²æŸ“ <code>html</code> æ ‡ç­¾è¿˜æœ‰å¯¹åº”çš„ <code>&lt;link&gt;</code> æ ‡ç­¾ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†åŸæœ¬çš„ä»£ç æŠ½ç¦»å‡ºä¸€ä¸ªç»„ä»¶</p> <p>æŠŠ Error Boundary ç»„ä»¶ä½œä¸ºå­ç»„ä»¶è¿™æ ·æ ·å¼å°±ä¼šç”Ÿæ•ˆäº†ã€‚</p> <p>ä¸‹é¢çš„ä»£ç å°±æ˜¯è¿”å›çš„ HTMLï¼Œå¯ä»¥çœ‹åˆ° <code>&lt;head&gt;</code> , <code>&lt;link&gt;</code> å’Œå¼€å‘ç¯å¢ƒä¸­æ”¯æŒçƒ­æ›´æ–°å»ºç«‹çš„ websocket</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Remix: So great, it<span class="token entity" title="&amp;#x27;">&amp;#x27;</span>s funny!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/build/_assets/global-3NTXPLP2.css<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span>
      <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/build/_assets/global-medium-DRHJR3JT.css<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>print, (min-width: 640px)<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span>
      <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/build/_assets/global-large-NKTQAWDZ.css<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>screen and (min-width: 1024px)<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/build/_assets/jokes-MGLBGUHK.css<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Oops! Something went wrong<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>lol is not defined<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token keyword">let</span> ws <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">&quot;ws://localhost:8002/socket&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ws<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> event <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;LOG&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;RELOAD&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ğŸ’¿ Reloading window ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      ws<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Remix dev asset server web socket error:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="https://gitee.com/SKADaddy/pic/raw/master/image-20211216173406714.png" alt="image-20211216173406714"></p> <p>é€šå¸¸æ¥è¯´é‡åˆ°ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„é”™è¯¯ç½‘é¡µå¯èƒ½å°±å´©äº†ï¼Œæˆ–è€…æ•´ä¸ªé¡µé¢å±•ç¤ºå‡ºå¯¹åº”çš„é”™è¯¯ï¼ŒRemix å‰å®³çš„ä¸€ç‚¹å°±åœ¨äºè¿™é‡Œï¼Œå› ä¸ºæ˜¯åµŒå¥—è·¯ç”±çš„å…³ç³»ï¼Œåªæ˜¯ $jokeId.tsx æ— æ³•ä½¿ç”¨ï¼Œå®ƒçš„çˆ¶çº§é¡µé¢ä»ç„¶å¯ä»¥ç‚¹å‡»è·³è½¬åˆ°å¯¹åº”çš„ jokeã€‚è¿™æ ·ç”¨æˆ·ä½“éªŒä¼šæ›´å¥½ï¼Œä¸ç”¨åˆ·æ–°æˆ–è€…å›é€€é¡µé¢äº†ã€‚</p> <h5 id="usematches"><a href="#usematches" class="header-anchor">#</a> useMatches</h5> <p>åœ¨ Error Boundary ç»„ä»¶ä¸­è¿˜å¯ä»¥ä½¿ç”¨ <code>useMatches</code> æ¥è·å–åŒ¹é…çš„è·¯ç”±å’Œæ•°æ®ï¼Œåœ¨ $jokeId.tsx çš„ loader ä¸­ throw ä¸€ä¸ªé”™è¯¯</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">const</span> loader<span class="token operator">:</span> <span class="token function-variable function">LoaderFunction</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request<span class="token punctuation">,</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> userId <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getUserId</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;whoops&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- {jokeId: &quot;123&quot;}</span>
  <span class="token keyword">const</span> joke <span class="token operator">=</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span>joke<span class="token punctuation">.</span><span class="token function">findUnique</span><span class="token punctuation">(</span><span class="token punctuation">{</span> where<span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> params<span class="token punctuation">.</span>jokeId <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// if (!joke) throw new Error(&quot;Joke not found&quot;);</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>joke<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">&quot;What a joke! Not found.&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      status<span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> data<span class="token operator">:</span> LoaderData <span class="token operator">=</span> <span class="token punctuation">{</span>
    joke<span class="token punctuation">,</span>
    isOwner<span class="token operator">:</span> userId <span class="token operator">===</span> joke<span class="token punctuation">.</span>jokesterId<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// åœ¨ ErrorBoundary ä¸­ä½¿ç”¨ useMatches</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">ErrorBoundary</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> error <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> error<span class="token operator">:</span> Error <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token function">useParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">useMatches</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// throw ahha;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Something went wrong when loading </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">.</span>jokeId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!!!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ‰“å°å‡ºæ¥çš„ç»“æœå¦‚ä¸‹</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    pathname<span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    params<span class="token operator">:</span> <span class="token punctuation">{</span> jokeId<span class="token operator">:</span> <span class="token string">&quot;88f54075-151a-48ed-9bb2-3b1615f5e53d&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    handle<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    pathname<span class="token operator">:</span> <span class="token string">&quot;/jokes&quot;</span><span class="token punctuation">,</span>
    params<span class="token operator">:</span> <span class="token punctuation">{</span> jokeId<span class="token operator">:</span> <span class="token string">&quot;88f54075-151a-48ed-9bb2-3b1615f5e53d&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span> jokes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">Array</span><span class="token punctuation">]</span><span class="token punctuation">,</span> user<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    handle<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    pathname<span class="token operator">:</span> <span class="token string">&quot;/jokes/88f54075-151a-48ed-9bb2-3b1615f5e53d&quot;</span><span class="token punctuation">,</span>
    params<span class="token operator">:</span> <span class="token punctuation">{</span> jokeId<span class="token operator">:</span> <span class="token string">&quot;88f54075-151a-48ed-9bb2-3b1615f5e53d&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    handle<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="å¤„ç†æ„æ–™ä¹‹å†…çš„é”™è¯¯"><a href="#å¤„ç†æ„æ–™ä¹‹å†…çš„é”™è¯¯" class="header-anchor">#</a> å¤„ç†æ„æ–™ä¹‹å†…çš„é”™è¯¯</h4> <p>æœ‰ä¸€äº›é”™è¯¯æ˜¯æˆ‘ä»¬çŸ¥é“å¯èƒ½ä¼šå‘ç”Ÿçš„é”™è¯¯ï¼Œåƒ &gt;400 &amp;&amp; &lt; 500 æ˜¯å®¢æˆ·ç«¯é”™è¯¯ï¼Œ&gt;500 æ˜¯æœåŠ¡ç«¯é”™è¯¯ã€‚</p> <p>å¯¹äºå®¢æˆ·ç«¯çš„é”™è¯¯ï¼ŒRemix æä¾›äº†ä¸€ä¸ªç±»ä¼¼äº Error Boundary çš„ä¸œè¥¿ï¼Œå« <a href="https://remix.run/docs/en/v1.0.6/api/conventions#catchboundary" target="_blank" rel="noopener noreferrer"><code>Catch Boundaries</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ã€‚å’Œ loaderã€action ç”¨æ³•å·®ä¸å¤šï¼Œé€šè¿‡ <code>useCatch</code> è·å–æŠ›å‡ºçš„ Response å¯¹è±¡ï¼Œç„¶åæ ¹æ® Response è¿›è¡Œç›¸å…³å¤„ç†ã€‚</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">const</span> loader<span class="token operator">:</span> <span class="token function-variable function">LoaderFunction</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> userId <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getUserId</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">&quot;Unauthorized&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token number">401</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">CatchBoundary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> caught <span class="token operator">=</span> <span class="token function">useCatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>caught<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">You must be logged in to create a joke.</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Login</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://gitee.com/SKADaddy/pic/raw/master/image-20211217095424643.png" alt="image-20211217095424643"></p> <p>æœ‰æ–°å¢é‚£ä¹ˆå°±æœ‰åˆ é™¤ï¼Œä½†æ˜¯åœ¨ <code>&lt;form&gt;</code> è¡¨å•ä¸­åªæœ‰ GET å’Œ POSTï¼Œä¸æ”¯æŒ DELETE ï¼Œä¸ºäº†å¯ä»¥è®©è¡¨å•åœ¨æ²¡æœ‰ JavaScript çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨ï¼Œå®˜ç½‘ä¸¾äº†ä¸ªä¾‹å­</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_method<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>delete<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Delete<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>è¿™æ ·å°±å¯ä»¥åœ¨ action é‡Œé¢é€šè¿‡ <code>request.formData().get('_method')</code> çŸ¥é“è¿™ä¸ªè¯·æ±‚äº‹ DELETE è¯·æ±‚</p> <h3 id="seo"><a href="#seo" class="header-anchor">#</a> SEO</h3> <p>ç°åœ¨æµè¡Œçš„æ¡†æ¶æ‰“åŒ…å‡ºæ¥çš„åº”ç”¨éƒ½æ˜¯å•é¡µåº”ç”¨ï¼Œä¼—æ‰€å‘¨çŸ¥å•é¡µåº”ç”¨å¯¹äº SEO ä¸å¤ªå‹å¥½ã€‚Remix ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª <a href="https://remix.run/docs/en/v1.0.6/api/conventions#meta" target="_blank" rel="noopener noreferrer">MetaFunction<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼Œæˆ‘ä»¬å¯¼å‡ºä¸€ä¸ª meta å‡½æ•°ï¼Œå°±å¯ä»¥åœ¨é‡Œé¢è¯»å–åˆ° loader çš„æ•°æ®å†åŠ¨æ€èµ‹å€¼ç»™ <code>&lt;meta&gt;</code> æ ‡ç­¾ã€‚æˆ‘ä»¬è¿˜è¦åƒä¸Šé¢åŠ è½½ CSS æ ·å¼ä¸€æ ·ï¼Œä» remix é‡Œé¢å¼•å…¥ <code>&lt;Meta /&gt;</code> ç»„ä»¶æ”¾åˆ° <code>&lt;head&gt;</code> æ ‡ç­¾é‡Œé¢ã€‚</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> LinksFunction<span class="token punctuation">,</span> MetaFunction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;remix&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Links<span class="token punctuation">,</span> LiveReload<span class="token punctuation">,</span> Outlet<span class="token punctuation">,</span> useCatch<span class="token punctuation">,</span> Meta <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;remix&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> globalStylesUrl <span class="token keyword">from</span> <span class="token string">&quot;./styles/global.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> globalMediumStylesUrl <span class="token keyword">from</span> <span class="token string">&quot;./styles/global-medium.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> globalLargeStylesUrl <span class="token keyword">from</span> <span class="token string">&quot;./styles/global-large.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> links<span class="token operator">:</span> <span class="token function-variable function">LinksFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      rel<span class="token operator">:</span> <span class="token string">&quot;stylesheet&quot;</span><span class="token punctuation">,</span>
      href<span class="token operator">:</span> globalStylesUrl<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      rel<span class="token operator">:</span> <span class="token string">&quot;stylesheet&quot;</span><span class="token punctuation">,</span>
      href<span class="token operator">:</span> globalMediumStylesUrl<span class="token punctuation">,</span>
      media<span class="token operator">:</span> <span class="token string">&quot;print, (min-width: 640px)&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      rel<span class="token operator">:</span> <span class="token string">&quot;stylesheet&quot;</span><span class="token punctuation">,</span>
      href<span class="token operator">:</span> globalLargeStylesUrl<span class="token punctuation">,</span>
      media<span class="token operator">:</span> <span class="token string">&quot;screen and (min-width: 1024px)&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> meta<span class="token operator">:</span> <span class="token function-variable function">MetaFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> description <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Learn Remix and laugh at the same time!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    description<span class="token punctuation">,</span>
    keywords<span class="token operator">:</span> <span class="token string">&quot;Remix,jokes&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;twitter:image&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://remix-jokes.lol/social.png&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;twitter:card&quot;</span><span class="token operator">:</span> <span class="token string">&quot;summary_large_image&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;twitter:creator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@remix_run&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;twitter:site&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@remix_run&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;twitter:title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Remix Jokes&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;twitter:description&quot;</span><span class="token operator">:</span> description<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Document</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  children<span class="token punctuation">,</span>
  title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Remix: So great, it's funny!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  children<span class="token operator">:</span> React<span class="token punctuation">.</span>ReactNode<span class="token punctuation">;</span>
  title<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charSet</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Meta</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Links</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token punctuation">{</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&quot;development&quot;</span> <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LiveReload</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Outlet</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Document</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">CatchBoundary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> caught <span class="token operator">=</span> <span class="token function">useCatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>caught<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>caught<span class="token punctuation">.</span>statusText<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span>caught<span class="token punctuation">.</span>status<span class="token punctuation">}</span><span class="token plain-text"> </span><span class="token punctuation">{</span>caught<span class="token punctuation">.</span>statusText<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Document</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">ErrorBoundary</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> error <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> error<span class="token operator">:</span> Error <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Uh-oh!<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">App Error</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>error<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Document</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="èµ„æºè·¯ç”±"><a href="#èµ„æºè·¯ç”±" class="header-anchor">#</a> èµ„æºè·¯ç”±</h3> <p>æœ‰æ—¶å€™æˆ‘ä»¬æƒ³è®©æˆ‘ä»¬çš„è·¯ç”±æ¸²æŸ“çš„å†…å®¹ä¸å•å•æ˜¯ HTML æ–‡æœ¬ï¼Œåƒ pdfã€rss è®¢é˜…ä¹‹ç±»çš„ã€‚æˆ‘ä»¬éœ€è¦æŠŠæ–‡ä»¶åä¸­çš„ <code>.</code> åŠ ä¸Šä¸­æ‹¬å·ï¼Œå®˜ç½‘çš„ rss ä¾‹å­å°±æ˜¯ <code>jokes[.]rss.tsx</code></p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> LoaderFunction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;remix&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> db <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;~/utils/db.server&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">escapeCdata</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">&quot;]]&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;]]]]&gt;&lt;![CDATA[&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">escapeHtml</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> s
    <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&amp;amp;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&amp;lt;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">&quot;&gt;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&amp;gt;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">'&quot;'</span><span class="token punctuation">,</span> <span class="token string">&quot;&amp;quot;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">&quot;'&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&amp;#039;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> loader<span class="token operator">:</span> <span class="token function-variable function">LoaderFunction</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> jokes <span class="token operator">=</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span>joke<span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    take<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    orderBy<span class="token operator">:</span> <span class="token punctuation">{</span> createdAt<span class="token operator">:</span> <span class="token string">&quot;desc&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    include<span class="token operator">:</span> <span class="token punctuation">{</span> jokester<span class="token operator">:</span> <span class="token punctuation">{</span> select<span class="token operator">:</span> <span class="token punctuation">{</span> username<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> host <span class="token operator">=</span>
    request<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;X-Forwarded-Host&quot;</span><span class="token punctuation">)</span> <span class="token operator">??</span> request<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;host&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>host<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Could not determine domain URL.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> protocol <span class="token operator">=</span> host<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;http&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;https&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> domain <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>protocol<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>host<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> jokesUrl <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>domain<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/jokes</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> rssString <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;rss xmlns:blogChannel=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>jokesUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; version=&quot;2.0&quot;&gt;
      &lt;channel&gt;
        &lt;title&gt;Remix Jokes&lt;/title&gt;
        &lt;link&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>jokesUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/link&gt;
        &lt;description&gt;Some funny jokes&lt;/description&gt;
        &lt;language&gt;en-us&lt;/language&gt;
        &lt;generator&gt;Kody the Koala&lt;/generator&gt;
        &lt;ttl&gt;40&lt;/ttl&gt;
        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>jokes
          <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>joke<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;item&gt;
              &lt;title&gt;&lt;![CDATA[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">escapeCdata</span><span class="token punctuation">(</span>joke<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]]&gt;&lt;/title&gt;
              &lt;description&gt;&lt;![CDATA[A funny joke called </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">escapeHtml</span><span class="token punctuation">(</span>
                joke<span class="token punctuation">.</span>name
              <span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]]&gt;&lt;/description&gt;
              &lt;author&gt;&lt;![CDATA[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">escapeCdata</span><span class="token punctuation">(</span>
                joke<span class="token punctuation">.</span>jokester<span class="token punctuation">.</span>username
              <span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]]&gt;&lt;/author&gt;
              &lt;pubDate&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>joke<span class="token punctuation">.</span>createdAt<span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/pubDate&gt;
              &lt;link&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>jokesUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>joke<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/link&gt;
              &lt;guid&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>jokesUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>joke<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/guid&gt;
            &lt;/item&gt;
          </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
      &lt;/channel&gt;
    &lt;/rss&gt;
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span>rssString<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;Cache-Control&quot;</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">public, max-age=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">60</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, s-maxage=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token string">&quot;Content-Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;application/xml&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;Content-Length&quot;</span><span class="token operator">:</span> <span class="token function">String</span><span class="token punctuation">(</span>Buffer<span class="token punctuation">.</span><span class="token function">byteLength</span><span class="token punctuation">(</span>rssString<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿™é‡Œå¯èƒ½ä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬éœ€è¦æŠŠ <code>tsconfig.json</code> çš„ <code>compilerOptions</code> çš„ <code>&quot;lib&quot;: [&quot;DOM&quot;, &quot;DOM.Iterable&quot;, &quot;ES2019&quot;],</code> æ”¹æˆè¿™ä¸ª <code>&quot;lib&quot;: [&quot;DOM&quot;, &quot;DOM.Iterable&quot;, &quot;ES2021&quot;],</code></p> <p><img src="https://gitee.com/SKADaddy/pic/raw/master/image-20211217114052585.png" alt="image-20211217114052585"></p> <h3 id="javascript"><a href="#javascript" class="header-anchor">#</a> JavaScript</h3> <p>åœ¨ä¹‹å‰çš„å¼€å‘ä¸­ï¼Œç»†å¿ƒçš„åŒå­¦å¯èƒ½å·²ç»å‘ç°äº†ï¼Œå½“æˆ‘ä»¬çš„é¡µé¢åˆ·æ–°åŠ è½½çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„åº”ç”¨æ˜¯ä¸ä¼šåŠ è½½ js æ–‡ä»¶çš„ï¼Œ</p> <p><img src="https://gitee.com/SKADaddy/pic/raw/master/image-20211217114323527.png" alt="image-20211217114323527"></p> <p>å¯ä»¥çœ‹åˆ°è¿™é‡ŒåªåŠ è½½äº†æˆ‘çš„è°·æ­Œæ’ä»¶çš„ js æ–‡ä»¶ï¼Œæ²¡æœ‰å’Œ Remix ç›¸å…³çš„ js æ–‡ä»¶ã€‚è¿™ä¹Ÿæ˜¯ Remix çš„ä¸€å¤§äº®ç‚¹ä¹‹ä¸€ï¼ï¼ï¼å¯èƒ½æœ‰äººä¼šè¯´ï¼Œç°åœ¨éƒ½ä»€ä¹ˆå¹´ä»£äº†ï¼ŒåŠ è½½ä¸€ä¸‹ JavaScript åˆä¸ä¼šæ€ä¹ˆæ ·ã€‚è¿™ä¹Ÿèƒ½ç®—ä¼˜ç‚¹ï¼Ÿä½†æ˜¯æ¯•ç«Ÿæ¯ä¸ªäººçš„æƒ…å†µä¸ä¸€æ ·ï¼Œç½‘é€Ÿæœ‰å¿«æœ‰æ…¢ï¼Œæ…¢çš„å¯èƒ½éœ€è¦ç­‰å¾…ä½ çš„åº”ç”¨åŠ è½½å®Œ JavaScript æ‰èƒ½ä½¿ç”¨ç›¸åº”çš„åŠŸèƒ½ï¼Œä½†æ˜¯å¦‚æœç”¨æˆ·æ— éœ€åŠ è½½ JS æ–‡ä»¶å°±èƒ½å¤Ÿä½¿ç”¨æ­£å¸¸çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆå¯¹äºç”¨æˆ·çš„ä½“éªŒæ¥è¯´æ˜¯ä¸€ç§å¾ˆå¤§çš„æå‡ã€‚</p> <p>ä½†æ˜¯è¿™ä¹Ÿæ˜¯æœ‰ç¼ºç‚¹çš„ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»å·¦è¾¹çš„ joke è·å–å¯¹åº”çš„æ•°æ®æ—¶ï¼Œä½ ä¼šå‘ç°æˆ‘ä»¬çš„ç½‘é¡µæ˜¯ä¼šåˆ·æ–°çš„ï¼Œè™½ç„¶çƒ­æ›´æ–°çš„é€Ÿåº¦éå¸¸å¿«ï¼Œä½†å®ƒè¿˜æ˜¯åˆ·æ–°é¡µé¢äº†ã€‚</p> <p>é™¤äº†ä¸Šé¢è¿™ç‚¹ï¼Œæœ‰äº›æƒ…å†µè¿˜æ˜¯éœ€è¦ JS æ–‡ä»¶æ‰èƒ½è¿è¡Œçš„ï¼Œä¾‹å¦‚ä¸€äº› UI å±•ç¤ºè¿˜æ˜¯éœ€è¦ JS æ¥åˆ¤æ–­ä»€ä¹ˆæ—¶å€™å±•ç¤ºä»€ä¹ˆæ ·çš„ UIã€‚</p> <p>è®© Remix åŠ è½½ JS æ–‡ä»¶æˆ‘ä»¬å¯ä»¥ä» remix åŒ…é‡Œé¢å¼•å…¥ <code>&lt;Scripts /&gt;</code> ç»„ä»¶</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Links<span class="token punctuation">,</span> LiveReload<span class="token punctuation">,</span> Outlet<span class="token punctuation">,</span> useCatch<span class="token punctuation">,</span> Meta<span class="token punctuation">,</span> Scripts <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;remix&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>

<span class="token keyword">function</span> <span class="token function">Document</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  children<span class="token punctuation">,</span>
  title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Remix: So great, it's funny!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  children<span class="token operator">:</span> React<span class="token punctuation">.</span>ReactNode<span class="token punctuation">;</span>
  title<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charSet</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Meta</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Links</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Scripts</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&quot;development&quot;</span> <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LiveReload</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Outlet</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Document</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°åŠ è½½äº†çš„ JS æ–‡ä»¶ï¼Œè€Œä¸”ç‚¹å‡» joke è·å–ç¬‘è¯çš„æ—¶å€™é¡µé¢ä¹Ÿä¸ä¼šåˆ·æ–°äº†</p> <p><img src="https://gitee.com/SKADaddy/pic/raw/master/image-20211217115621197.png" alt="image-20211217115621197"></p> <p>è€Œä¸”ä½ ç°åœ¨ <code>ErrorBoundary</code> ç»„ä»¶ç”¨ <code>console.error</code> æ‰“å°é”™è¯¯çš„æ—¶å€™ï¼Œå®ƒä¸ä»…ä»…ä¼šåœ¨æœåŠ¡ç«¯æ‰“å°å‡ºï¼Œåœ¨æµè§ˆå™¨ä¹Ÿå¯ä»¥æ‰“å°å‡ºé”™è¯¯çš„ä¿¡æ¯ã€‚</p> <p><img src="https://gitee.com/SKADaddy/pic/raw/master/server-side-error-in-browser.png" alt="Browser console showing the log of a server-side error"></p> <h3 id="form"><a href="#form" class="header-anchor">#</a> Form</h3> <p>HTML çš„åŸç”Ÿæ ‡ç­¾ <code>&lt;form&gt;</code> åœ¨æäº¤åä¼šåˆ·æ–°é¡µé¢ï¼Œæ‰€ä»¥ Remix ä¸ºæˆ‘ä»¬æä¾›äº†åŠ å¼ºç‰ˆçš„ <a href="https://remix.run/docs/en/v1.0.6/api/remix#form" target="_blank" rel="noopener noreferrer"><code>&lt;Form /&gt;</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ç»„ä»¶ï¼Œåœ¨ JavaScript æ²¡æœ‰åŠ è½½å®Œæˆçš„æ—¶å€™ï¼Œå®ƒæ˜¯åŸç”Ÿçš„ <code>&lt;form&gt;</code> æ ‡ç­¾ï¼Œå½“ JS åŠ è½½å®Œæˆä¹‹åï¼Œå®ƒå°±å˜æˆå¢å¼ºç‰ˆï¼Œä¼šå‘é€ <code>fetch</code> è¯·æ±‚ï¼Œé»˜è®¤ <code>preventDefault</code> è¿™æ ·å°±ä¸ä¼šå‘è¯·æ±‚åˆ·æ–°é¡µé¢äº†ã€‚</p> <h3 id="prefetch"><a href="#prefetch" class="header-anchor">#</a> Prefetch</h3> <p>å¦‚æœä¸€ä¸ªç”¨æˆ·çš„é¼ æ ‡ç§»åŠ¨åˆ°ä¸€ä¸ªé“¾æ¥ä¸Šé¢ï¼Œåˆ™è¡¨æ˜è¿™ä¸ªç”¨æˆ·å¯èƒ½æƒ³è·³è½¬åˆ°é‚£ä¸ªé¡µé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ prefetch å¯¹åº”çš„é¡µé¢ï¼Œè¿™æ ·ç”¨æˆ·ç‚¹å‡»è·³è½¬çš„æ—¶å€™ä¼šè§‰å¾—å¾ˆå¿«ã€‚åœ¨ Remix è¦å®ç°è¿™ä¸ªåŠŸèƒ½å¾ˆç®€å•åªéœ€è¦åœ¨ <code>&lt;Link /&gt;</code> ç»„ä»¶ä¸ŠåŠ ä¸€ä¸ªå±æ€§ <code>prefetch</code></p> <p>ä» Remix çš„ TypeScript æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°è¿™ä¸ªå±æ€§æœ‰ä¸‰ä¸ªå€¼å¯ä»¥å¡«</p> <p><img src="https://gitee.com/SKADaddy/pic/raw/master/image-20211217154146528.png" alt="image-20211217154146528"></p> <p>å½“ä½ çš„é¼ æ ‡ç§»ä¸Šå»çš„æ—¶å€™ä½ ä¼šå‘ç° network é‡Œé¢æˆåŠŸ prefetch å¯¹åº”çš„ JS æ–‡ä»¶</p> <p><img src="https://gitee.com/SKADaddy/pic/raw/master/image-20211217153534969.png" alt="image-20211217153534969"></p> <h3 id="ui-äº¤äº’ä¼˜åŒ–"><a href="#ui-äº¤äº’ä¼˜åŒ–" class="header-anchor">#</a> UI äº¤äº’ä¼˜åŒ–</h3> <p>å®˜ç½‘çš„ä¾‹å­ä¸­è¿˜è®²è¿°äº†å¦‚ä½•é€šè¿‡ <code>useTransition</code> æ¥ä¼˜åŒ–ç”¨æˆ·ç‚¹å‡»æäº¤æ•°æ®å UI ç•Œé¢çš„äº’åŠ¨å±•ç¤ºï¼Œ<a href="https://remix.run/docs/en/v1/tutorials/jokes#optimistic-ui" target="_blank" rel="noopener noreferrer">è¯¦æƒ…<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å¯ä»¥ç›´æ¥ç‚¹è¿›å»çœ‹ï¼Œè¿™é‡Œå°±ä¸å±•å¼€æè¿°äº†ã€‚</p> <h3 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="header-anchor">#</a> éƒ¨ç½²</h3> <p>å®˜ç½‘æ•™ç¨‹æ˜¯ç”¨çš„ <a href="https://fly.io/" target="_blank" rel="noopener noreferrer">fly.io<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> æ¥éƒ¨ç½²è¿™ä¸ªé¡¹ç›®çš„ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥æ³¨å†Œä¸ªè´¦å·è¯•ä¸€è¯•</p> <h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> æ€»ç»“</h3> <p>Remix ä½œä¸ºä¸€æ¬¾å…¨æ ˆæ¡†æ¶æœ‰ç€ä»¥ä¸‹å‡ ä¸ªä¼˜ç‚¹</p> <ul><li>å¤©ç„¶çš„åµŒå¥—è·¯ç”±ä¼˜åŠ¿</li> <li>å„ç§é”™è¯¯çš„è¾¹ç•Œå¤„ç†</li> <li>é è¿‘åŸç”Ÿ WEB ï¼Œä¸éœ€è¦æŠ•å…¥è¿‡å¤šçš„å­¦ä¹ æˆæœ¬ï¼Œå½“ç„¶è¿˜æ˜¯è¦å­¦ä¹  React çš„åŸºç¡€çŸ¥è¯†çš„</li> <li>SEO å‹å¥½</li> <li>è‡ªåŠ¨æ‹†åˆ†ä»£ç ï¼Œæ— éœ€ç¹ççš„é…ç½®</li></ul> <p>Remix æ¯•ç«Ÿæ‰åˆšå‡º 1.0 ç‰ˆæœ¬æ²¡å¤šä¹…ï¼Œç”Ÿæ€ã€æ•™ç¨‹ä¹‹ç±»çš„èµ„æºè¿˜æ¯”è¾ƒå°‘ï¼Œä½†æ˜¯ç›¸ä¿¡åœ¨ Remix åœ¨å…³é—­æ”¶è´¹è®¢é˜…æ¨¡å¼ä½œä¸ºå¼€æºé¡¹ç›®èƒ½å¤Ÿæ‹¿åˆ° 300 ä¸‡ç¾å…ƒçš„æŠ•èµ„ï¼Œä¸å°‘äººå¯¹è¿™ä¸ªæ¡†æ¶è¿˜æ˜¯å¯¹æœ‰ä¿¡å¿ƒçš„ï¼Œæ¯•ç«ŸæœåŠ¡ç«¯æ¸²æŸ“çš„ SEO é—®é¢˜ï¼Œå¾ˆå¤šäººéƒ½ä¼šæ­é… Next æˆ– Nuxt æ¥è¿›è¡Œå¼€å‘ã€‚Remix ä½œä¸ºå…¨æ ˆæ¡†æ¶ä¹Ÿå¯ä»¥æä¾›æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå¹¶ä¸”æ˜¯ä¸€ä½“çš„ï¼Œç›¸ä¿¡åœ¨æœªæ¥ä¼šæœ‰æ›´å¤šäººé€‰æ‹© Remix æ¡†æ¶ã€‚</p> <p>ä»å‰ç«¯åˆ°å…¨æ ˆï¼Œæˆ‘æƒ³è¿™æ˜¯å¾ˆå¤šäººéƒ½æœ‰æƒ³è¿‡çš„é—®é¢˜ï¼Œè¦åšåˆ°å…¨æ ˆï¼Œå¾ˆå¤šæ—¶å€™å°±æ„å‘³ç€éœ€è¦é‡æ–°å­¦ä¹ ä¸€é—¨è¯­è¨€ï¼Œè¿™æˆä¸ºäº†å¾ˆå¤šäººçš„æ‹¦è·¯è™ã€‚</p> <p>Remix è§£å†³äº†è¯­è¨€çš„é—®é¢˜ï¼Œå°†ä¼šæ˜¯è®¸å¤šå‰ç«¯å¼€å‘äººå‘˜è¿ˆå‘å…¨æ ˆçš„ä¸€ç§å°è¯•ï¼Œç›¸ä¿¡å‰ç«¯çš„æœªæ¥å‘å±•ç»ä¸ä»…äºæ­¤ã€‚</p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/Blog/article/vue/composition-api.html" class="prev">
            composition-api
          </a></span> <!----></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#remix" class="sidebar-link reco-side-remix" data-v-cb1513f6>Remix</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#ä»€ä¹ˆæ˜¯-remix" class="sidebar-link reco-side-ä»€ä¹ˆæ˜¯-remix" data-v-cb1513f6>ä»€ä¹ˆæ˜¯ Remix</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#å‰ç½®çŸ¥è¯†" class="sidebar-link reco-side-å‰ç½®çŸ¥è¯†" data-v-cb1513f6>å‰ç½®çŸ¥è¯†</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#å¼€å‘ç¯å¢ƒ" class="sidebar-link reco-side-å¼€å‘ç¯å¢ƒ" data-v-cb1513f6>å¼€å‘ç¯å¢ƒ</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#åˆ›å»º-remix-é¡¹ç›®" class="sidebar-link reco-side-åˆ›å»º-remix-é¡¹ç›®" data-v-cb1513f6>åˆ›å»º Remix é¡¹ç›®</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#ç›®å½•ç»“æ„" class="sidebar-link reco-side-ç›®å½•ç»“æ„" data-v-cb1513f6>ç›®å½•ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#è·¯ç”±" class="sidebar-link reco-side-è·¯ç”±" data-v-cb1513f6>è·¯ç”±</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#æ ·å¼" class="sidebar-link reco-side-æ ·å¼" data-v-cb1513f6>æ ·å¼</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#æ•°æ®åº“" class="sidebar-link reco-side-æ•°æ®åº“" data-v-cb1513f6>æ•°æ®åº“</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#æ•°æ®æäº¤" class="sidebar-link reco-side-æ•°æ®æäº¤" data-v-cb1513f6>æ•°æ®æäº¤</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#æƒé™" class="sidebar-link reco-side-æƒé™" data-v-cb1513f6>æƒé™</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#é”™è¯¯å¤„ç†" class="sidebar-link reco-side-é”™è¯¯å¤„ç†" data-v-cb1513f6>é”™è¯¯å¤„ç†</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#seo" class="sidebar-link reco-side-seo" data-v-cb1513f6>SEO</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#èµ„æºè·¯ç”±" class="sidebar-link reco-side-èµ„æºè·¯ç”±" data-v-cb1513f6>èµ„æºè·¯ç”±</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#javascript" class="sidebar-link reco-side-javascript" data-v-cb1513f6>JavaScript</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#form" class="sidebar-link reco-side-form" data-v-cb1513f6>Form</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#prefetch" class="sidebar-link reco-side-prefetch" data-v-cb1513f6>Prefetch</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#ui-äº¤äº’ä¼˜åŒ–" class="sidebar-link reco-side-ui-äº¤äº’ä¼˜åŒ–" data-v-cb1513f6>UI äº¤äº’ä¼˜åŒ–</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#éƒ¨ç½²" class="sidebar-link reco-side-éƒ¨ç½²" data-v-cb1513f6>éƒ¨ç½²</a></li><li class="level-3" data-v-cb1513f6><a href="/Blog/article/react/remix-offical-tutorial.html#æ€»ç»“" class="sidebar-link reco-side-æ€»ç»“" data-v-cb1513f6>æ€»ç»“</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/Blog/assets/js/app.1176005e.js" defer></script><script src="/Blog/assets/js/3.daabd2a0.js" defer></script><script src="/Blog/assets/js/1.317b0f87.js" defer></script><script src="/Blog/assets/js/11.668eb78e.js" defer></script>
  </body>
</html>
